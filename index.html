<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>DARKNET SUPREME COMMANDER</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

<style>
:root{
  --green:#00ff9c;
  --red:#ff2b2b;
  --bg:#050708;
  --card:#0b0f12;
  --glow-green:0 0 15px rgba(0,255,156,.7);
  --glow-red:0 0 15px rgba(255,43,43,.7);
  --wait: #888;
  font-family: 'Segoe UI', sans-serif;
}

*{margin:0;padding:0;box-sizing:border-box;}
body{
  background:var(--bg);
  color:#fff;
  padding-bottom: 70px; /* Space for navbar */
}

/* HEADER */
header{
  padding:14px;
  font-size:18px;
  letter-spacing:1px;
  text-align: center;
  border-bottom: 1px solid #222;
}

/* AURA (MAIN TERMINAL) */
.aura{
  margin:10px;
  padding:18px;
  border-radius:14px;
  background:linear-gradient(135deg,#003b26,#000);
  border:2px solid var(--green);
  box-shadow:var(--glow-green);
  transition: 0.3s;
  text-align: center;
}
.aura.red{
  background:linear-gradient(135deg,#3b0000,#000);
  border-color:var(--red);
  box-shadow:var(--glow-red);
}
.aura.wait {
  background: #111;
  border-color: #444;
  box-shadow: none;
}

.aura h1{
  font-size:32px;
  color:var(--green);
  margin: 10px 0;
  font-weight: 800;
}
.aura.red h1{color:var(--red);}
.aura.wait h1{color:var(--wait); animation: blink 1s infinite;}

.sec{
  float:right;
  padding:5px 12px;
  border:2px solid currentColor;
  border-radius:8px;
  font-size: 14px;
}

/* STREAK */
.streak{
  margin:10px;
  padding:15px;
  border-radius:14px;
  border:1px solid #333;
  background: #0a0a0a;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.9rem;
}

/* CARD */
#card-container {
    padding-bottom: 60px;
}
.card{
  margin:12px;
  padding:18px;
  border-radius:16px;
  background:var(--card);
  border:2px solid var(--green);
  box-shadow:var(--glow-green);
  position:relative;
  animation: slideIn 0.3s ease-out;
}
.card.loss{
  border-color:var(--red);
  box-shadow:var(--glow-red);
}
.card.wait {
  border-color: #444;
  box-shadow: none;
}

.card h2{color:var(--green); font-size: 24px;}
.card.loss h2{color:var(--red);}

.icon{
  position:absolute;
  right:16px;
  top:18px;
  font-size:28px;
}

/* BOTTOM NAV */
nav{
  position:fixed;
  bottom:0;
  width:100%;
  background:#050708;
  display:flex;
  justify-content:space-around;
  padding:15px 0;
  border-top:2px solid var(--green);
  z-index: 100;
}
nav i{
  font-size:22px;
  color:#aaa;
  cursor: pointer;
  transition: 0.3s;
}
nav .active{color:var(--green); text-shadow: 0 0 10px var(--green);}

/* ANIMATIONS */
@keyframes blink { 50% { opacity: 0.5; } }
@keyframes slideIn { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

/* CONFETTI */
#confetti-layer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 999; }
.particle { position: absolute; width: 8px; height: 8px; border-radius: 50%; animation: rain 3s linear forwards; }
@keyframes rain { to { transform: translateY(100vh); opacity: 0; } }

</style>
</head>

<body>

<div id="confetti-layer"></div>

<header>DARKNET SUPREME COMMANDER</header>

<div id="main-aura" class="aura">
  <div class="sec">SEC<br><b id="timer">--</b></div>
  <p style="font-size: 12px; letter-spacing: 2px;">TARGET: <span id="target-period">----</span></p>
  <h1 id="pred-text">SCANNING...</h1>
  <p id="strategy-text">INITIALIZING...</p>
  <div style="margin-top: 10px; font-size: 14px;">JACKPOT SEEDS: <span id="seeds">--, --</span></div>
</div>

<div class="streak">
  <span><i class="fa-solid fa-trophy" style="color:var(--green)"></i> WINS: <b id="win-count">0</b></span>
  <span><i class="fa-solid fa-triangle-exclamation" style="color:var(--red)"></i> LOSS: <b id="loss-count">0</b></span>
</div>

<div id="card-container">
    </div>

<nav>
  <i class="fa-solid fa-terminal active"></i>
  <i class="fa-solid fa-list"></i>
  <i class="fa-solid fa-chart-line"></i>
  <i class="fa-solid fa-user-secret"></i>
</nav>

<script>
    // --- FIREBASE CONFIG ---
    const firebaseConfig = {
        apiKey: "AIzaSyA8qJ3qJl5fzbOBKopx99zsACkEGofbfyY",
        authDomain: "admin-91a73.firebaseapp.com",
        databaseURL: "https://admin-91a73-default-rtdb.firebaseio.com",
        projectId: "admin-91a73",
        storageBucket: "admin-91a73.firebasestorage.app",
        messagingSenderId: "153529788738",
        appId: "1:153529788738:web:65363636579881912940db",
        measurementId: "G-N4T0HV7ER1"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // --- STATE ---
    let history = []; 
    let stats = { win: 0, loss: 0 };
    let lastFetchedIssue = null;
    let lastSavedIssue = null;
    let currentPred = { p: "WAIT", n: ["?", "?"], period: "----", m: "SYNCING" };

    // --- FIREBASE SYNC ---
    async function syncToFirebase(data) {
        try {
            const ref = db.ref('rounds');
            const snap = await ref.orderByChild('issueNumber').equalTo(data.issueNumber).once('value');
            if(!snap.exists()) await ref.push(data);
        } catch(e) {}
    }

    // --- TIME-BASED L2 FIXER STRATEGY ---
    function calculateStrategy(list, lastWin) {
        const recent = list.slice(0, 10);
        const lastNum = parseInt(recent[0].number);
        const lastSize = lastNum >= 5 ? 'BIG' : 'SMALL';
        
        // 1. Time Factor
        const d = new Date();
        const timeFactor = d.getMinutes() + d.getSeconds(); 
        
        // 2. L2 Fixer Logic
        // Agar pichla round hara hai, to aggressive mode (Fixer)
        let isFixerMode = !lastWin; 

        let pred = "";
        let method = "";

        if(isFixerMode) {
            // *** L2 FIXER MODE ***
            // Time Reverse Logic to break the bad streak
            if (timeFactor % 2 === 0) {
                 pred = lastSize === 'BIG' ? 'SMALL' : 'BIG'; // CUT
                 method = "L2 TIME CUT";
            } else {
                 pred = lastSize; // FOLLOW
                 method = "L2 TIME FLOW";
            }
        } else {
            // *** L1 SAFE MODE ***
            // Sirf tab trade lo jab Time aur Trend match karein
            let trend = lastSize; 
            let timeDir = (timeFactor % 2 !== 0) ? 'BIG' : 'SMALL';
            
            if (trend === timeDir) {
                pred = trend;
                method = "TIME+TREND SYNC";
            } else {
                return null; // WAIT (Safe Mode)
            }
        }

        // Jackpot Mirror Numbers (0=5, 1=6 logic)
        let n1 = (lastNum + 5) % 10; 
        let n2 = (lastNum + 7) % 10;

        return { p: pred, n: [n1, n2], m: method };
    }

    // --- MAIN ENGINE ---
    async function engineLoop() {
        try {
            const res = await fetch("https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json?pageSize=20&ts=" + Date.now());
            const json = await res.json();
            const list = json.data.list;
            const latest = list[0];
            const issue = latest.issueNumber;
            const num = parseInt(latest.number);

            // 1. Save to Firebase
            if(lastSavedIssue !== issue) {
                lastSavedIssue = issue;
                syncToFirebase({ issueNumber: issue, number: num, size: num>=5?'BIG':'SMALL', time: Date.now() });
            }

            // 2. Check Result
            let lastWinState = true;
            if(history.length > 0 && history[0].status === 'analyzing' && history[0].period === issue) {
                const actualSize = num >= 5 ? 'BIG' : 'SMALL';
                const win = history[0].pred === actualSize;
                
                if(win) {
                    lastWinState = true;
                    history[0].status = 'win';
                    stats.win++;
                    fireConfetti();
                } else {
                    lastWinState = false;
                    history[0].status = 'loss';
                    stats.loss++;
                }
                history[0].result = num;
                history[0].actual = actualSize;
                updateUI();
            }

            // 3. Predict Next
            if(lastFetchedIssue !== issue) {
                lastFetchedIssue = issue;
                const next = (BigInt(issue) + 1n).toString();
                
                // Determine L1 vs L2 based on history
                let prevWin = history.length > 0 ? (history[0].status === 'win') : true;

                const logic = calculateStrategy(list, prevWin);

                if (logic) {
                    currentPred = { p: logic.p, n: logic.n, period: next, m: logic.m };
                    history.unshift({ period: next, pred: logic.p, nums: logic.n, status: 'analyzing', method: logic.m });
                } else {
                    currentPred = { p: "WAIT", n: ["-", "-"], period: next, m: "SAFE MODE" };
                }
                
                if(history.length > 50) history.pop(); // Keep list clean
                updateUI();
            }
        } catch(e) { console.log(e); }
    }

    // --- FX ---
    function fireConfetti() {
        const c = document.getElementById('confetti-layer');
        for(let i=0; i<100; i++) {
            let d = document.createElement('div');
            d.className = 'particle';
            d.style.left = Math.random()*100+'vw';
            d.style.background = `hsl(${Math.random()*360}, 100%, 50%)`;
            d.style.animationDuration = Math.random()*2+1+'s';
            c.appendChild(d);
            setTimeout(()=>d.remove(), 3000);
        }
    }

    // --- UI UPDATER ---
    function updateUI() {
        // Update Main Aura
        const aura = document.getElementById('main-aura');
        const predText = document.getElementById('pred-text');
        const seeds = document.getElementById('seeds');
        
        document.getElementById('target-period').innerText = currentPred.period.slice(-4);
        document.getElementById('strategy-text').innerText = currentPred.m;
        
        predText.innerText = currentPred.p;
        seeds.innerText = currentPred.n.join(', ');

        // Aura Colors
        aura.className = 'aura'; // Reset
        if(currentPred.p === 'SMALL') aura.classList.add('red');
        if(currentPred.p === 'WAIT') aura.classList.add('wait');

        // Update Stats
        document.getElementById('win-count').innerText = stats.win;
        document.getElementById('loss-count').innerText = stats.loss;

        // Render Cards
        const container = document.getElementById('card-container');
        container.innerHTML = history.map(h => {
            if(h.status === 'analyzing') return ''; // Don't show analyzing card in list yet
            
            let cardClass = h.status === 'loss' ? 'loss' : '';
            let icon = h.status === 'loss' ? 'fa-skull-crossbones' : 'fa-trophy';
            let resText = h.status === 'loss' ? 'LOSS' : 'WIN';
            let resColor = h.status === 'loss' ? 'var(--red)' : 'var(--green)';

            return `
            <div class="card ${cardClass}">
                <i class="fa-solid ${icon} icon" style="color:${resColor}"></i>
                <small>PERIOD #${h.period.slice(-4)} Â· ${h.method}</small>
                <h2>${h.pred}</h2>
                <p>SEEDS: ${h.nums.join(', ')}</p>
                <p style="color:${resColor}; font-weight:bold;">${resText}! RESULT: ${h.result} (${h.actual})</p>
            </div>`;
        }).join('');
    }

    // --- TIMER ---
    setInterval(() => {
        const s = 60 - new Date().getSeconds();
        document.getElementById('timer').innerText = s.toString().padStart(2, '0');
        if(s === 1 || s === 59) engineLoop();
    }, 1000);

    // Initial Start
    engineLoop();

</script>
</body>
</html>
