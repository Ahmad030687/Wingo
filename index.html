<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Darknet V.40 Auto-Sync</title>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
<style>
    *{box-sizing:border-box;margin:0;padding:0}
    :root{ --bg:#050b14; --neon:#00e5ff; --glass:rgba(8,22,38,0.95); --border:rgba(0,229,255,0.4); --text:#e9faff; --green:#00ff9c; --red:#ff3b3b; }
    body{ background:radial-gradient(circle at top,var(--bg),#02060c 80%); font-family: 'Segoe UI', sans-serif; color:var(--text); min-height: 100vh; overflow-x: hidden; }
    .app{ max-width:420px; margin:auto; padding:15px; padding-bottom: 90px; }

    /* HEADER */
    .header{ padding:18px; border-radius:18px; background:linear-gradient(135deg,var(--glass),#020b14); border:1px solid var(--border); box-shadow:0 0 30px rgba(0,229,255,0.2), inset 0 0 20px rgba(0,229,255,0.1); display:flex; justify-content:space-between; align-items:center; margin-bottom: 15px; }
    .aura{ font-size:20px; font-weight:800; color:var(--neon); text-shadow:0 0 15px var(--neon); letter-spacing:1px; }
    .timer-badge{ background:#000; color:var(--neon); padding:5px 12px; border-radius:8px; border:1px solid var(--neon); font-weight:bold; box-shadow:0 0 10px var(--neon); font-size:18px; }

    /* CARD */
    .card{ position:relative; padding:20px; border-radius:22px; background:var(--glass); backdrop-filter:blur(14px); border:1px solid var(--border); box-shadow:0 0 25px rgba(0,0,0,0.6), inset 0 0 15px rgba(0,229,255,0.05); margin-bottom:15px; overflow:hidden; }
    
    .period-box{ display:flex; justify-content:space-between; font-size:12px; color:var(--neon); margin-bottom:10px; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:8px; }
    .prediction-val{ font-size:60px; font-weight:900; color:var(--text); text-shadow:0 0 35px var(--neon); text-align:center; margin:10px 0; letter-spacing:2px; }
    .jackpot-box{ display:flex; justify-content:center; gap:15px; margin-top:10px; }
    .jackpot-box div{ width:50px; height:50px; border-radius:12px; background:#071b2d; border:1px solid var(--border); box-shadow:0 0 12px var(--neon); display:flex; align-items:center; justify-content:center; font-weight:bold; font-size: 20px; color: #ffcc00; }
    
    .logic-text { text-align:center; font-size:10px; color:var(--green); letter-spacing:2px; margin-top:10px; opacity:0.8; font-weight:bold; }

    /* STATS */
    .stats-grid{ display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-bottom:15px; }
    .stat-box{ padding:15px; border-radius:16px; background:rgba(0,0,0,0.4); border:1px solid var(--border); text-align:center; }
    .stat-box h3{ font-size:24px; margin:0; }
    .stat-box p{ font-size:10px; opacity:0.6; margin:0; }

    /* ARCHIVE (Right Side Icons) */
    .arc-card { position:relative; background:linear-gradient(145deg,#0b1622,#04080d); border-radius:16px; padding:15px 18px; margin-top:12px; border-left: 5px solid var(--green); overflow:hidden; box-shadow:0 5px 15px rgba(0,0,0,0.5); display: flex; justify-content: space-between; align-items: center; }
    .arc-card.loss { border-left-color: var(--red); }
    .arc-info { display: flex; flex-direction: column; }
    .arc-round { font-size: 11px; opacity: 0.7; margin-bottom: 2px; }
    .arc-res { font-size: 20px; font-weight: bold; color: #fff; }

    .status-icon { width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; }
    .shield { background: var(--green); clip-path: polygon(50% 0%, 95% 20%, 95% 60%, 50% 100%, 5% 60%, 5% 20%); box-shadow: 0 0 15px var(--green); }
    .cross { background: var(--red); border-radius: 50%; box-shadow: 0 0 15px var(--red); position: relative; }
    .cross::before, .cross::after { content: ""; position: absolute; width: 18px; height: 3px; background: white; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(45deg); }
    .cross::after { transform: translate(-50%, -50%) rotate(-45deg); }

    /* FOOTER */
    .footer{ position: fixed; bottom: 15px; left: 50%; transform: translateX(-50%); width: 92%; padding: 15px; border-radius: 18px; display: flex; justify-content: space-around; background: linear-gradient(135deg,#041423,var(--glass)); border: 1px solid var(--border); box-shadow: 0 0 20px var(--neon); z-index: 100; backdrop-filter: blur(10px); }
    .footer span{ opacity: 0.5; cursor: pointer; font-size: 13px; font-weight: bold; }
    .active-nav { opacity: 1 !important; color: var(--neon); text-shadow: 0 0 10px var(--neon); }
</style>
</head>
<body>

<div class="app">
    <div class="header">
        <div class="aura">DARKNET V.40 SYNC</div>
        <div class="timer-badge" id="timer">00</div>
    </div>

    <div id="page-terminal">
        <div class="card">
            <div class="period-box"><span>30S AUTO-SENSING</span><span id="nextP">SYNCING...</span></div>
            <div class="prediction-val" id="pred">WAIT</div>
            <div class="jackpot-box" id="jack"><div>?</div><div>?</div></div>
            <div class="logic-text" id="logic">CALIBRATING MARKET...</div>
        </div>

        <div class="stats-grid">
            <div class="stat-box"><h3 id="wins" style="color:var(--green)">0</h3><p>SESSION WINS</p></div>
            <div class="stat-box"><h3 id="lvl" style="color:var(--neon)">L1</h3><p>SYNC LEVEL</p></div>
        </div>
    </div>

    <div id="page-archive" style="display:none; padding-bottom:80px;">
        <div id="list"></div>
    </div>

    <div class="footer">
        <span class="active-nav" onclick="tab('page-terminal', this)">TERMINAL</span>
        <span onclick="tab('page-archive', this)">ARCHIVE</span>
    </div>
</div>

<script>
    const API = "https://draw.ar-lottery01.com/WinGo/WinGo_30S/GetHistoryIssuePage.json?ts=";
    const BOSS_MAP = { 0:[5,2], 1:[6,3], 2:[7,4], 3:[8,0], 4:[9,1], 5:[0,7], 6:[1,8], 7:[2,9], 8:[3,5], 9:[4,6] };
    
    let lastPeriod = "";
    let activePred = null;
    let wins = 0;
    let level = 1;

    // Fast 1s Sync for 30S
    setInterval(sync, 1000);
    setInterval(updateTimer, 1000);

    function updateTimer() {
        const d = new Date();
        const s = d.getSeconds();
        let remaining = s < 30 ? 30 - s : 60 - s;
        const el = document.getElementById('timer');
        el.innerText = remaining < 10 ? "0"+remaining : remaining;
        el.style.color = remaining <= 5 ? "var(--red)" : "var(--neon)";
        el.style.borderColor = remaining <= 5 ? "var(--red)" : "var(--neon)";
    }

    async function sync() {
        try {
            const res = await fetch(API + Date.now());
            const data = await res.json();
            const list = data.data.list;
            const currentP = list[0].issueNumber;

            if (currentP !== lastPeriod) {
                if (activePred && lastPeriod !== "") checkResult(list[0], activePred);
                lastPeriod = currentP;
                generateDualCorePrediction(list);
            }
        } catch (e) { console.log("Syncing..."); }
    }

    // --- V.40 DUAL CORE LOGIC (Pattern vs Math) ---
    function generateDualCorePrediction(history) {
        const lastNum = parseInt(history[0].number);
        const prevNum = parseInt(history[1].number);
        const pPrevNum = parseInt(history[2].number);
        
        const lastBS = lastNum >= 5 ? "BIG" : "SMALL";
        const prevBS = prevNum >= 5 ? "BIG" : "SMALL";
        const pPrevBS = pPrevNum >= 5 ? "BIG" : "SMALL";
        
        let prediction, logic;
        let [n1, n2] = BOSS_MAP[lastNum];
        let nextP = (BigInt(history[0].issueNumber) + 1n).toString();

        // 1. Calculate MATH VECTOR Prediction (Theoretical)
        const periodDigit = parseInt(history[0].issueNumber.slice(-1));
        const mathSeed = (lastNum * 3 + periodDigit) % 10;
        const mathPred = mathSeed >= 5 ? "BIG" : "SMALL";
        
        // 2. Calculate PATTERN FLOW Prediction (Theoretical)
        let patternPred;
        if (lastBS === prevBS && prevBS === pPrevBS) patternPred = lastBS; // Dragon
        else if (lastBS !== prevBS) patternPred = lastBS === "BIG" ? "SMALL" : "BIG"; // ZigZag
        else patternPred = n1 >= 5 ? "BIG" : "SMALL"; // Mirror

        // 3. AUTO-SYNC: Check which logic WON the LAST Round?
        // Let's see what Math vs Pattern predicted for the *current* result (history[0]) based on history[1]
        const prevPeriodDigit = parseInt(history[1].issueNumber.slice(-1));
        const prevMathSeed = (prevNum * 3 + prevPeriodDigit) % 10;
        const prevMathPred = prevMathSeed >= 5 ? "BIG" : "SMALL";
        
        let prevPatternPred; // Based on history[1]..
        const p3BS = history[3].number >= 5 ? "BIG" : "SMALL";
        if (prevBS === pPrevBS && pPrevBS === p3BS) prevPatternPred = prevBS;
        else if (prevBS !== pPrevBS) prevPatternPred = prevBS === "BIG" ? "SMALL" : "BIG";
        else {
             let [pn1, pn2] = BOSS_MAP[prevNum];
             prevPatternPred = pn1 >= 5 ? "BIG" : "SMALL";
        }

        // Did Math Win?
        const mathWon = prevMathPred === lastBS;
        // Did Pattern Win?
        const patternWon = prevPatternPred === lastBS;

        // --- LEVEL 2 FIXER ---
        if (level === 2) {
             if(lastNum === 0 || lastNum === 5) {
                prediction = "SMALL"; logic = "L2: ZERO-TRAP FIX";
             } else {
                // If L1 failed, use the logic that actually WON last time
                if (mathWon) {
                     prediction = mathPred; logic = "L2: SYNC TO MATH";
                } else if (patternWon) {
                     prediction = patternPred; logic = "L2: SYNC TO PATTERN";
                } else {
                     // If both failed (Rare), Force Reverse
                     prediction = lastBS === "BIG" ? "SMALL" : "BIG"; logic = "L2: FORCE REVERSE";
                }
             }
        }
        // --- LEVEL 1 SURESHOT ---
        else {
            if (lastNum === 0 || lastNum === 5) {
                prediction = "SMALL"; logic = "L1: MAGNET TRAP SENSE";
            }
            // If Math is winning, use Math
            else if (mathWon) {
                prediction = mathPred;
                logic = "L1: VECTOR MATH (HOT)";
            } 
            // If Pattern is winning, use Pattern
            else if (patternWon) {
                prediction = patternPred;
                logic = "L1: PATTERN FLOW (HOT)";
            } 
            // If both lost last time, default to Boss Map (Safety)
            else {
                prediction = n1 >= 5 ? "BIG" : "SMALL";
                logic = "L1: BOSS MAP SAFE";
            }
        }

        activePred = { period: nextP, pred: prediction, n1, n2, logic };

        document.getElementById('nextP').innerText = nextP.slice(-5);
        document.getElementById('pred').innerText = prediction;
        document.getElementById('pred').style.color = prediction === 'BIG' ? 'var(--neon)' : 'var(--text)';
        document.getElementById('jack').innerHTML = `<div>${n1}</div><div>${n2}</div>`;
        document.getElementById('logic').innerText = logic;
        document.getElementById('lvl').innerText = "L" + level;
    }

    function checkResult(actual, pred) {
        const actualBS = actual.number >= 5 ? "BIG" : "SMALL";
        const isWin = actualBS === pred.pred;
        
        if (isWin) { 
            wins++; level = 1; 
            // SUPREME CELEBRATION
            var colors = ['#00e5ff', '#00ff9c', '#ffffff'];
            confetti({ particleCount: 250, spread: 100, origin: { y: 0.6 }, colors: colors });
        } else { 
            level = level === 1 ? 2 : 1; 
        }
        
        document.getElementById('wins').innerText = wins;
        const list = document.getElementById('list');
        const card = document.createElement('div');
        card.className = `arc-card ${isWin ? '' : 'loss'}`;
        card.innerHTML = `
            <div class="arc-info">
                <div class="arc-round">#${actual.issueNumber.slice(-5)} (${pred.logic})</div>
                <div class="arc-res" style="color:${isWin?'var(--green)':'var(--red)'}">${actualBS} (${actual.number})</div>
            </div>
            <div class="status-icon ${isWin ? 'shield' : 'cross'}"></div>
        `;
        list.prepend(card);
    }

    function tab(id, btn) {
        document.getElementById('page-terminal').style.display = id === 'page-terminal' ? 'block' : 'none';
        document.getElementById('page-archive').style.display = id === 'page-archive' ? 'block' : 'none';
        document.querySelectorAll('.footer span').forEach(s => s.classList.remove('active-nav'));
        btn.classList.add('active-nav');
    }
</script>
</body>
</html>
