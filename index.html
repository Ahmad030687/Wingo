<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Premium Predictor V.39</title>
<style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:Arial, sans-serif;transition:0.3s ease;}    
    body{background:var(--bg);color:var(--text);padding-bottom:70px;}    
    
    /* THEME COLORS */
    :root{
        --bg:#0d0d0d; --text:#fff; --card:#1a1a1a; --border:#333; --green:#00ff6a; --loss:#ff2f2f; --accent:#00ff6a;
    }
    .light{--bg:#f3f3f3;--text:#000;--card:#fff;--border:#ccc;--accent:#000;}
    .blue{--bg:#0a1a3a;--text:#fff;--card:#112955;--border:#1d3a7a;--accent:#4facfe;}
    .red{--bg:#2a0000;--text:#fff;--card:#3d0a0a;--border:#5c0f0f;--accent:#ff2f2f;}
    .purple{--bg:#160020;--text:#fff;--card:#2a0040;--border:#440066;--accent:#d900ff;}
    .green{--bg:#001a0a;--text:#fff;--card:#003d1a;--border:#00662d;--accent:#00ff6a;}
    .orange{--bg:#2a1500;--text:#fff;--card:#3d1f00;--border:#5c2f00;--accent:#ff8800;}
    .gold{--bg:#1a1500;--text:#fff;--card:#3a3000;--border:#6d5b00;--accent:#ffd700;}

    /* HEADER */
    .header{
        padding:15px;text-align:center;font-size:24px;font-weight:bold;border-bottom:1px solid var(--border);
        background: var(--card); position: sticky; top: 0; z-index: 100;
        display:flex; justify-content:space-between; align-items:center;
    }
    .timer{ font-size: 16px; background: var(--border); padding: 5px 10px; border-radius: 20px; font-family: monospace; }

    /* STATS */
    .stats{
        display:flex;justify-content:space-around;padding:15px;background:var(--card);border-bottom:1px solid var(--border);
    }
    .stat-box{text-align:center;font-size:14px;}
    .stat-value{font-size:20px;font-weight:bold;}
    .win{color:var(--green)!important;}
    .loss{color:var(--loss);}

    /* HOME / PREDICTION CARD */
    .pred-box{
        padding: 30px; text-align: center; border-bottom: 1px solid var(--border);
    }
    .big-txt{ font-size: 60px; font-weight: 900; margin: 10px 0; color: var(--accent); text-shadow: 0 0 20px var(--border); }
    .status-badge{ 
        font-size: 12px; font-weight: bold; background: var(--border); 
        padding: 5px 10px; border-radius: 5px; display: inline-block; 
    }
    .seeds{ margin-top: 15px; font-size: 14px; font-weight: bold; color: var(--text); opacity: 0.8; }

    /* ARCHIVE */
    .archive{padding:15px;}
    .card{
        background:var(--card);border:1px solid var(--border);padding:12px;border-radius:8px;margin-bottom:10px;
        display:flex;justify-content:space-between;align-items:center;
    }
    .tag{padding:4px 8px;border-radius:5px;font-size:13px;font-weight:bold;}
    .tag.win{background:#003b1f;color:var(--green);}
    .tag.loss{background:#3b0000;color:var(--loss);}
    
    /* BLUE HIGHLIGHT FOR WINNING NUMBER */
    .blue-hit { 
        color: #00f0ff; font-weight: 900; font-size: 16px; 
        text-shadow: 0 0 10px #00f0ff; border: 1px solid #00f0ff; 
        padding: 2px 6px; border-radius: 4px; background: rgba(0, 240, 255, 0.1);
    }

    /* NAVIGATION */
    .nav{
        position:fixed;bottom:0;left:0;width:100%;display:flex;background:var(--card);
        border-top:1px solid var(--border); z-index: 999;
    }
    .nav button{
        flex:1;padding:12px;border:none;background:none;color:var(--text);font-size:14px;
        display:flex;flex-direction:column;align-items:center; cursor: pointer;
    }
    .nav button:hover{background:var(--border);}
    .nav button.active{color:var(--green);}

    /* THEME SWITCHER */
    .theme-box{padding:15px;display:grid;grid-template-columns:repeat(2,1fr);gap:10px;}
    .theme-btn{
        padding:10px;border-radius:6px;text-align:center;border:1px solid var(--border);
        background:var(--card);cursor:pointer;
    }
    .theme-btn:hover{background:var(--border);}

</style>
</head>
<body class="dark">

<div class="header">
    <div id="pageTitle">TITAN V.39</div>
    <div class="timer" id="timer">00:00</div>
</div>

<div id="home" style="display:block;">
    <div class="stats">
        <div class="stat-box">
            <div>Target</div>
            <div class="stat-value" id="pDisp">---</div>
        </div>
        <div class="stat-box">
            <div>Status</div>
            <div class="stat-value win" id="statusShort">ACTIVE</div>
        </div>
    </div>

    <div class="pred-box">
        <div style="font-size: 14px; opacity: 0.6;">V.39 CHAOS-EATER</div>
        <div class="big-txt" id="mainPred">---</div>
        <div class="status-badge" id="algoStatus">CALIBRATING MARKET...</div>
        
        <div class="seeds">
            SEEDS: <span id="seedDisp" style="color:var(--green)">?, ?</span>
        </div>
    </div>

    <div style="padding: 15px;">
        <div class="card" style="justify-content: center; opacity: 0.7;">
            <span>MODE: ZIG-ZAG DETECTION</span>
        </div>
    </div>
</div>

<div id="archive" style="display:none;">
    <div class="stats">
        <div class="stat-box">
            <div>Total Win</div>
            <div class="stat-value win" id="totalWins">0</div>
        </div>
        <div class="stat-box">
            <div>Total Loss</div>
            <div class="stat-value loss" id="totalLoss">0</div>
        </div>
        <div class="stat-box">
            <div>Accuracy</div>
            <div class="stat-value win" id="accuracy">100%</div>
        </div>
    </div>
    
    <div class="archive" id="archiveList">
        </div>
</div>

<div class="theme-box" id="themes" style="display:none;">
    <div class="theme-btn" onclick="setTheme('dark')">Dark Theme</div>
    <div class="theme-btn" onclick="setTheme('light')">Light Theme</div>
    <div class="theme-btn" onclick="setTheme('blue')">Blue</div>
    <div class="theme-btn" onclick="setTheme('red')">Red</div>
    <div class="theme-btn" onclick="setTheme('purple')">Purple</div>
    <div class="theme-btn" onclick="setTheme('green')">Green</div>
    <div class="theme-btn" onclick="setTheme('orange')">Orange</div>
    <div class="theme-btn" onclick="setTheme('gold')">Gold</div>
</div>

<div class="nav">
    <button class="active" onclick="showSection('home', this)">üè†<br>Home</button>
    <button onclick="showSection('archive', this)">üìú<br>Archive</button>
    <button onclick="showSection('themes', this)">üé®<br>Themes</button>
</div>

<script>
    // --- UI FUNCTIONS ---
    function showSection(sec, btn){
        document.getElementById('home').style.display='none';
        document.getElementById('archive').style.display='none';
        document.getElementById('themes').style.display='none';
        
        document.getElementById(sec).style.display='block';

        // Update Nav
        document.querySelectorAll('.nav button').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        
        // Update Title
        const titles = {'home': 'TITAN V.39', 'archive': 'ARCHIVE LOG', 'themes': 'THEME SETTINGS'};
        document.getElementById('pageTitle').innerText = titles[sec];
    }

    function setTheme(theme){ document.body.className = theme; }

    // --- TITAN V.39 LOGIC ENGINE (CHAOS EATER) ---
    const API = "https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json";
    let lastP = ""; 
    let log = [];
    let isSyncing = false;

    // Main Loop
    setInterval(() => {
        const s = new Date().getSeconds();
        const rem = 60 - s;
        document.getElementById('timer').innerText = `00:${rem < 10 ? '0' : ''}${rem}`;
        if(s === 1 || s % 3 === 0) titanSync();
    }, 1000);

    async function titanSync() {
        if(isSyncing) return;
        isSyncing = true;
        try {
            await new Promise(r => setTimeout(r, Math.random() * 300));
            const r = await fetch(`${API}?pageSize=20&ts=${Date.now()}`);
            const d = await r.json();
            const list = d.data.list;
            const currentP = list[0].issueNumber;

            // 1. Result Check
            if (log.length > 0 && log[0].period === currentP) {
                const actNum = parseInt(list[0].number);
                const actBS = actNum >= 5 ? "BIG" : "SMALL";
                log[0].res = (actBS === log[0].pred) ? "WIN" : "LOSS";
                log[0].num = actNum;
                updateArchiveUI();
                updateStatsUI();
            }

            // 2. New Prediction
            if (currentP !== lastP) {
                lastP = currentP;
                const nextP = (BigInt(currentP) + 1n).toString();
                document.getElementById('pDisp').innerText = nextP;
                
                runTitanLogic(list, nextP);
            }
        } catch (e) { console.log(e); }
        isSyncing = false;
    }

    function runTitanLogic(list, nextP) {
        const nums = list.map(x => parseInt(x.number));
        const bs = nums.map(n => n >= 5 ? "BIG" : "SMALL");
        let p = "";
        let status = "";
        let seeds = [];

        // Analysis Variables
        let lastRes = bs[0];
        let prevRes = bs[1];
        let isZigZag = (lastRes !== prevRes); // True if S-B or B-S
        let isDragon = (lastRes === prevRes); // True if S-S or B-B

        // --- TITAN V.39 DECISION CORE ---
        
        if (log.length > 0 && log[0].res === "LOSS") {
            // === INTELLIGENT RECOVERY MODE ===
            
            if (isZigZag) {
                // If market is flipping (ZigZag), we FLIP too.
                // We lost because we tried to catch a dragon that wasn't there.
                p = (lastRes === "BIG") ? "SMALL" : "BIG";
                status = "‚ö° ZIG-ZAG DETECTED: SWITCH";
            } 
            else if (isDragon) {
                // If market is repeating (Dragon), we FOLLOW.
                // We lost because we tried to predict a break.
                p = lastRes;
                status = "üêâ DRAGON DETECTED: FOLLOW";
            }
            else {
                // Default Recovery
                p = (lastRes === "BIG") ? "SMALL" : "BIG";
                status = "üîÑ RECOVERY FLIP";
            }
        } else {
            // === NORMAL MODE (Flow with Market) ===
            // If previous result was ZigZag, predict ZigZag.
            if(isZigZag) {
                 p = (lastRes === "BIG") ? "SMALL" : "BIG";
                 status = "üåä FLOW: ZIG-ZAG";
            } else {
                 // If previous was Dragon, predict Dragon
                 p = lastRes;
                 status = "üåä FLOW: TREND";
            }
        }

        // Seeds
        if (p === "BIG") seeds = [8, 6];
        else seeds = [1, 3];

        // UI Update
        const mainPred = document.getElementById('mainPred');
        mainPred.innerText = p;
        mainPred.style.color = p === "BIG" ? "var(--green)" : "var(--text)";
        
        document.getElementById('algoStatus').innerText = status;
        document.getElementById('seedDisp').innerText = seeds.join(", ");
        document.getElementById('statusShort').innerText = "RUNNING";

        log.unshift({ period: nextP, pred: p, res: "WAIT", num: "?", seeds: seeds });
    }

    function updateArchiveUI() {
        const div = document.getElementById('archiveList');
        div.innerHTML = log.slice(0, 15).map(h => {
            const isWin = h.res === 'WIN';
            const tagClass = isWin ? 'tag win' : 'tag loss';
            
            // BLUE HIGHLIGHT LOGIC
            let numDisplay = h.num;
            if(isWin && h.num !== "?") {
                numDisplay = `<span class="blue-hit">${h.num}</span>`;
            }

            let resText = "WAITING";
            if(h.res !== "WAIT") resText = h.res;

            return `
            <div class="card">
                <div>
                    <span>#${h.period.slice(-4)}</span>
                    <span style="margin-left:5px; font-weight:bold; color:${h.pred==='BIG'?'var(--green)':'var(--text)'}">${h.pred}</span>
                </div>
                <div style="text-align:right">
                    <span>${numDisplay}</span>
                    <span class="${tagClass}" style="margin-left:5px;">${resText}</span>
                </div>
            </div>
            `;
        }).join('');
    }

    function updateStatsUI() {
        const wins = log.filter(x => x.res === 'WIN').length;
        const losses = log.filter(x => x.res === 'LOSS').length;
        const total = wins + losses;
        const acc = total === 0 ? 0 : Math.round((wins / total) * 100);

        document.getElementById('totalWins').innerText = wins;
        document.getElementById('totalLoss').innerText = losses;
        document.getElementById('accuracy').innerText = acc + "%";
    }

    // Initialize
    titanSync();

</script>
</body>
</html>
