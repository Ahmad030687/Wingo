<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Darknet Supreme 999+ | Supreme Commander</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* --- MASTER UI LOCK (FROM UI.HTML) --- */
        :root {
            --primary: #00ff00; --primary-dim: rgba(0, 255, 0, 0.1);
            --bg-color: #050505; --card-bg: #0a0a0a;
            --text-main: #ffffff; --text-dim: #888;
            --loss: #ff3333; --win: #00ff00; --analyzing: #00f3ff;
        }

        /* 10 PREMIUM THEMES */
        body.theme-green { --primary: #00ff00; }
        body.theme-crimson { --primary: #ff0055; --win: #ff0055; }
        body.theme-cyan { --primary: #00ffff; --win: #00ffff; }
        body.theme-gold { --primary: #ffd700; --win: #ffd700; }
        body.theme-purple { --primary: #bf00ff; --win: #bf00ff; }
        body.theme-orange { --primary: #ff8800; --win: #ff8800; }
        body.theme-blue { --primary: #0088ff; --win: #0088ff; }
        body.theme-white { --primary: #ffffff; --win: #ffffff; }
        body.theme-pink { --primary: #ff00ff; --win: #ff00ff; }
        body.theme-lime { --primary: #ccff00; --win: #ccff00; }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; }
        body { margin: 0; font-family: 'Rajdhani', sans-serif; background-color: var(--bg-color); color: var(--text-main); height: 100vh; display: flex; flex-direction: column; overflow: hidden; transition: 0.3s; }

        .top-bar { padding: 15px; border-bottom: 2px solid var(--primary); background: linear-gradient(180deg, rgba(0,0,0,1) 0%, rgba(0,50,0,0.1) 100%); z-index: 100; position: relative; }
        .app-title { font-family: 'Orbitron'; font-weight: 900; font-size: 1.2rem; color: var(--primary); letter-spacing: 1px; text-transform: uppercase; }
        .timer-box { position: absolute; right: 15px; top: 15px; text-align: right; border: 1px solid var(--primary); padding: 5px 10px; border-radius: 5px; }
        .timer-val { font-family: 'Orbitron'; font-weight: 700; font-size: 1.2rem; line-height: 1; }

        .content-area { flex: 1; overflow-y: auto; padding: 20px; padding-bottom: 90px; }
        
        /* CONFETTI LAYER */
        #confetti-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1000; overflow: hidden; }
        .confetti { position: absolute; width: 12px; height: 12px; top: -20px; border-radius: 2px; animation: fall linear forwards; }
        @keyframes fall { to { transform: translateY(110vh) rotate(720deg); } }

        /* TERMINAL CARD */
        .terminal-card { border: 1px solid var(--primary); border-radius: 15px; padding: 20px; background: radial-gradient(circle at center, var(--primary-dim) 0%, #000 100%); box-shadow: 0 0 20px var(--primary-dim); text-align: center; margin-bottom: 20px; }
        .target-box { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 20px; }
        .target-num { background: #111; border: 1px solid var(--primary); padding: 5px 15px; border-radius: 5px; font-family: 'Orbitron'; font-size: 1.2rem; font-weight: 700; }
        .main-prediction { font-family: 'Orbitron'; font-weight: 900; font-size: 4.5rem; color: var(--primary); text-shadow: 0 0 30px var(--primary); margin: 15px 0; }
        
        .pattern-box { border: 1px solid #333; border-radius: 10px; padding: 12px; margin-bottom: 20px; background: rgba(0,0,0,0.6); }
        .p-block { width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; font-family: 'Orbitron'; font-weight: 700; border-radius: 5px; font-size: 0.9rem; margin: 0 3px; }
        .pb-blue { border: 1px solid #00aaff; color: #00aaff; background: rgba(0, 170, 255, 0.1); }
        .pb-orange { border: 1px solid #ffaa00; color: #ffaa00; background: rgba(255, 170, 0, 0.1); }

        .jackpot-section { margin-top: 15px; border-top: 1px solid #333; padding-top: 20px; }
        .seed-circle { width: 75px; height: 75px; border-radius: 50%; background: var(--primary); color: #000; display: flex; align-items: center; justify-content: center; font-family: 'Orbitron'; font-size: 2.2rem; font-weight: 900; box-shadow: 0 0 20px var(--primary); }

        /* ARCHIVE DESIGN */
        .archive-list { display: flex; flex-direction: column; gap: 12px; }
        .history-card { background: #0e0e0e; border-radius: 12px; padding: 18px; border-left: 5px solid #333; display: flex; justify-content: space-between; align-items: center; }
        
        .res-circle { width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.4rem; border: 2px solid #333; }
        .circle-win { border-color: var(--win); background: rgba(0,255,0,0.1); box-shadow: 0 0 10px var(--win); }
        .circle-loss { border-color: var(--loss); background: rgba(255,0,0,0.1); box-shadow: 0 0 10px var(--loss); }
        .loader-ring { width: 25px; height: 25px; border: 3px solid #111; border-top: 3px solid var(--analyzing); border-radius: 50%; animation: spin 0.8s linear infinite; }

        /* ANALYTICS */
        .graph-container { height: 180px; position: relative; margin-top: 15px; border-left: 1px solid #333; border-bottom: 1px solid #333; }
        .strategy-line { fill: url(#grad); stroke: var(--primary); stroke-width: 3; }

        /* NAVBAR */
        .navbar { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 90%; max-width: 450px; background: #080808; border: 1px solid var(--primary); border-radius: 40px; display: flex; justify-content: space-between; padding: 12px 25px; z-index: 200; box-shadow: 0 0 20px var(--primary-dim); }
        .nav-item { color: #555; cursor: pointer; display: flex; flex-direction: column; align-items: center; transition: 0.3s; }
        .nav-item.active { color: var(--primary); filter: drop-shadow(0 0 5px var(--primary)); }
        .nav-item svg { width: 24px; height: 24px; fill: currentColor; }

        .stat-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        .stat-box { background: #111; border: 1px solid #333; padding: 20px; border-radius: 10px; text-align: center; }
        .stat-num { font-family: 'Orbitron'; font-size: 2.2rem; font-weight: 900; display: block; }

        @keyframes spin { 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="theme-green">

    <div id="confetti-container"></div>

    <div class="top-bar">
        <div class="app-title">DARKNET SUPREME</div>
        <div class="timer-box"><span class="timer-val" id="timer">00</span></div>
    </div>

    <div class="content-area" id="app-content"></div>

    <div class="navbar">
        <div class="nav-item active" onclick="switchTab('terminal')"><svg viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 18V6h16v12H4z"/><path d="M7.5 15H9v-4.5H7.5V15zm4.5 0h1.5V9H12v6zm4.5-3v3H18V9h-1.5v3z"/></svg></div>
        <div class="nav-item" onclick="switchTab('archive')"><svg viewBox="0 0 24 24"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/></svg></div>
        <div class="nav-item" onclick="switchTab('analytics')"><svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2v-5h2v5zm4 0h-2v-3h2v3z"/></svg></div>
        <div class="nav-item" onclick="switchTab('themes')"><svg viewBox="0 0 24 24"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8z"/></svg></div>
        <div class="nav-item" onclick="switchTab('profile')"><svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg></div>
    </div>

    <script>
        // --- FIREBASE CONFIG ---
        const firebaseConfig = {
            apiKey: "AIzaSyA8qJ3qJl5fzbOBKopx99zsACkEGofbfyY",
            authDomain: "admin-91a73.firebaseapp.com",
            databaseURL: "https://admin-91a73-default-rtdb.firebaseio.com",
            projectId: "admin-91a73",
            storageBucket: "admin-91a73.firebasestorage.app",
            messagingSenderId: "153529788738",
            appId: "1:153529788738:web:65363636579881912940db",
            measurementId: "G-N4T0HV7ER1"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // --- STATE ---
        let activeTab = 'terminal';
        let history = []; 
        let stats = { win: 0, loss: 0, jack: 0, double: 0 };
        let lastFetchedIssue = null;
        let lastSavedIssue = null;
        let currentPred = { p: "--", n: ["?", "?"], period: "----" };

        // --- FIREBASE WRITE LOGIC ---
        async function syncToFirebase(roundData) {
            try {
                const roundRef = db.ref('rounds');
                const snapshot = await roundRef.orderByChild('issueNumber').equalTo(roundData.issueNumber).once('value');
                if (!snapshot.exists()) {
                    await roundRef.push(roundData);
                    console.log("Round Sync: #" + roundData.issueNumber + " Saved ‚úÖ");
                }
            } catch (e) { console.error("Firebase Write Error", e); }
        }

        // --- CORE ENGINE ---
        async function engineLoop() {
            try {
                const res = await fetch("https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json?pageSize=10&ts=" + Date.now());
                const json = await res.json();
                const list = json.data.list;
                const latestRound = list[0];
                const issue = latestRound.issueNumber;
                const num = parseInt(latestRound.number);

                // 1. AUTO WRITE TO FIREBASE
                if (lastSavedIssue !== issue) {
                    lastSavedIssue = issue;
                    syncToFirebase({
                        issueNumber: issue,
                        number: num,
                        size: num >= 5 ? 'BIG' : 'SMALL',
                        timestamp: Date.now()
                    });
                }

                // 2. RESOLVE PREDICTIONS
                if(history.length > 0 && history[0].status === 'analyzing' && history[0].period === issue) {
                    const actualSize = num >= 5 ? 'BIG' : 'SMALL';
                    const win = history[0].pred === actualSize;
                    const isJack = history[0].nums.includes(num);
                    
                    if(win && isJack) { history[0].status = 'double'; stats.double++; triggerConfetti(); }
                    else if(win) { history[0].status = 'win'; stats.win++; triggerConfetti(); }
                    else if(isJack) { history[0].status = 'jack'; stats.jack++; triggerConfetti(); }
                    else { history[0].status = 'loss'; stats.loss++; }
                    
                    history[0].result = num;
                    renderView();
                }

                // 3. GENERATE NEXT
                if(lastFetchedIssue !== issue) {
                    lastFetchedIssue = issue;
                    const nextPeriod = (BigInt(issue) + 1n).toString();
                    let pSize = num >= 5 ? "SMALL" : "BIG";
                    let n1 = (num + 3) % 10;
                    let n2 = (num + 7) % 10;
                    currentPred = { period: nextPeriod, p: pSize, n: [n1, n2] };
                    history.unshift({ period: nextPeriod, pred: pSize, nums: [n1, n2], status: 'analyzing', result: null });
                    if(history.length > 15) history.pop();
                    renderView();
                }
            } catch(e) {}
        }

        function triggerConfetti() {
            const container = document.getElementById('confetti-container');
            for(let i=0; i<150; i++) {
                const conf = document.createElement('div');
                conf.className = 'confetti';
                conf.style.left = Math.random() * 100 + 'vw';
                conf.style.backgroundColor = ['#00ff00', '#ff0055', '#00ffff', '#ffd700', '#bf00ff'][Math.floor(Math.random()*5)];
                conf.style.animationDuration = (Math.random() * 2 + 1) + 's';
                container.appendChild(conf);
                setTimeout(() => conf.remove(), 3000);
            }
        }

        function renderView() {
            const container = document.getElementById('app-content');
            if(activeTab === 'terminal') {
                container.innerHTML = `
                    <div class="terminal-card">
                        <div class="target-box"><span>TARGET</span><span class="target-num">${currentPred.period.slice(-4)}</span></div>
                        <div class="main-prediction" style="color:${currentPred.p === 'BIG' ? 'var(--win)' : 'var(--loss)'}">${currentPred.p}</div>
                        <div class="pattern-box">
                            <div class="pattern-grid"><div class="p-block pb-blue">B</div><div class="p-block pb-orange">S</div><div class="p-block pb-blue">B</div></div>
                        </div>
                        <div class="jackpot-section">
                            <div class="seeds-container" style="display:flex; justify-content:center; gap:25px">
                                <div class="seed-circle">${currentPred.n[0]}</div>
                                <div class="seed-circle" style="background:var(--analyzing); box-shadow:0 0 15px var(--analyzing)">${currentPred.n[1]}</div>
                            </div>
                        </div>
                    </div>`;
            } else if(activeTab === 'archive') {
                container.innerHTML = `<div class="archive-list">` + history.map(h => {
                    let icon = ""; let cClass = "";
                    if(h.status === 'win') { icon = "‚úÖ"; cClass = "circle-win"; }
                    else if(h.status === 'loss') { icon = "‚ùå"; cClass = "circle-loss"; }
                    else if(h.status === 'jack') { icon = "üéâ"; cClass = "circle-win"; }
                    else if(h.status === 'double') { icon = "ü•≥"; cClass = "circle-win"; }
                    const resDisplay = h.status === 'analyzing' ? `<div class="loader-ring"></div>` : `<div class="res-circle ${cClass}">${icon}</div>`;
                    return `
                    <div class="history-card hc-${h.status}">
                        <div class="hc-left">
                            <span class="hc-period">#${h.period.slice(-4)}</span>
                            <div class="hc-pred">${h.pred} [${h.nums.join(',')}]</div>
                        </div>
                        <div class="hc-right">${resDisplay}</div>
                    </div>`;
                }).join('') + `</div>`;
            } else if(activeTab === 'analytics') {
                container.innerHTML = `
                    <div class="analytics-card">
                        <div style="color:var(--primary); font-family:Orbitron; font-size:1rem; margin-bottom:15px">STRATEGY FLOW</div>
                        <div class="graph-container">
                            <svg width="100%" height="100%" viewBox="0 0 100 50">
                                <defs><linearGradient id="grad" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:var(--primary);stop-opacity:0.5" /><stop offset="100%" style="stop-color:var(--primary);stop-opacity:0" /></linearGradient></defs>
                                <path class="strategy-line" d="M0,45 Q15,10 30,40 T60,20 T90,35 L100,50 L0,50 Z"></path>
                            </svg>
                        </div>
                    </div>`;
            } else if(activeTab === 'themes') {
                container.innerHTML = `<div class="themes-grid">
                    <div class="theme-btn" style="color:#00ff00" onclick="setTheme('theme-green')">GREEN</div>
                    <div class="theme-btn" style="color:#ff0055" onclick="setTheme('theme-crimson')">CRIMSON</div>
                    <div class="theme-btn" style="color:#00ffff" onclick="setTheme('theme-cyan')">CYAN</div>
                    <div class="theme-btn" style="color:#ffd700" onclick="setTheme('theme-gold')">GOLD</div>
                    <div class="theme-btn" style="color:#bf00ff" onclick="setTheme('theme-purple')">PURPLE</div>
                    <div class="theme-btn" style="color:#ff8800" onclick="setTheme('theme-orange')">ORANGE</div>
                    <div class="theme-btn" style="color:#0088ff" onclick="setTheme('theme-blue')">BLUE</div>
                    <div class="theme-btn" style="color:#ffffff" onclick="setTheme('theme-white')">WHITE</div>
                    <div class="theme-btn" style="color:#ff00ff" onclick="setTheme('theme-pink')">PINK</div>
                    <div class="theme-btn" style="color:#ccff00" onclick="setTheme('theme-lime')">LIME</div>
                </div>`;
            } else if(activeTab === 'profile') {
                container.innerHTML = `<div class="stat-grid">
                    <div class="stat-box" style="border-color:var(--win)"><span class="stat-num" style="color:var(--win)">${stats.win}</span><span>WINS</span></div>
                    <div class="stat-box" style="border-color:var(--loss)"><span class="stat-num" style="color:var(--loss)">${stats.loss}</span><span>LOSS</span></div>
                    <div class="stat-box" style="grid-column: span 2; border-color:#ffd700"><span class="stat-num" style="color:#ffd700">${stats.double}</span><span>DOUBLE WINS</span></div>
                </div>`;
            }
        }

        function switchTab(tab) {
            activeTab = tab;
            document.querySelectorAll('.nav-item').forEach((item, index) => {
                const tabs = ['terminal', 'archive', 'analytics', 'themes', 'profile'];
                item.classList.toggle('active', tabs[index] === tab);
            });
            renderView();
        }

        function setTheme(t) { document.body.className = t; }

        setInterval(() => {
            const s = 60 - new Date().getSeconds();
            document.getElementById('timer').innerText = s.toString().padStart(2, '0');
            if(s === 1 || s === 59) engineLoop();
        }, 1000);

        engineLoop();
        renderView();
    </script>
</body>
</html>
