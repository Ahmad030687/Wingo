<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TRX SUPREME 999+</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    
    <style>
        :root {
            --primary: #00ff00;
            --primary-dim: rgba(0, 255, 0, 0.1);
            --bg-color: #050505;
            --card-bg: #0a0a0a;
            --text-main: #ffffff;
            --text-dim: #888;
            --loss: #ff3333;
            --win: #00ff00;
        }

        /* THEMES */
        body.theme-crimson { --primary: #ff0055; --primary-dim: rgba(255, 0, 85, 0.1); --win: #ff0055; }
        body.theme-cyan { --primary: #00ffff; --primary-dim: rgba(0, 255, 255, 0.1); --win: #00ffff; }
        body.theme-gold { --primary: #ffd700; --primary-dim: rgba(255, 215, 0, 0.1); --win: #ffd700; }
        body.theme-purple { --primary: #bf00ff; --primary-dim: rgba(191, 0, 255, 0.1); --win: #bf00ff; }
        body.theme-blue { --primary: #0088ff; --primary-dim: rgba(0, 136, 255, 0.1); --win: #0088ff; }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            margin: 0; font-family: 'Rajdhani', sans-serif; background-color: var(--bg-color); color: var(--text-main);
            height: 100vh; display: flex; flex-direction: column; overflow: hidden;
        }

        /* HEADER */
        .top-bar {
            padding: 15px; border-bottom: 2px solid var(--primary);
            background: linear-gradient(180deg, rgba(0,0,0,1) 0%, rgba(0,50,0,0.1) 100%);
            z-index: 100;
        }
        .app-title { font-family: 'Orbitron'; font-weight: 900; font-size: 1.2rem; color: var(--primary); letter-spacing: 1px; }
        .app-subtitle { font-size: 0.7rem; color: var(--text-dim); letter-spacing: 2px; font-weight: 700; }
        .timer-box { position: absolute; right: 15px; top: 15px; text-align: right; border: 1px solid var(--primary); padding: 5px 10px; border-radius: 5px; }
        .timer-val { font-family: 'Orbitron'; font-weight: 700; font-size: 1.2rem; line-height: 1; }
        .timer-label { font-size: 0.5rem; color: var(--primary); display: block; }

        /* CONTENT */
        .content-area { flex: 1; overflow-y: auto; padding: 20px; padding-bottom: 90px; }

        /* TERMINAL */
        .terminal-card {
            border: 1px solid var(--primary); border-radius: 15px; padding: 20px;
            background: radial-gradient(circle at center, var(--primary-dim) 0%, #000 100%);
            box-shadow: 0 0 20px var(--primary-dim); text-align: center; margin-bottom: 20px;
        }
        .target-box { display: flex; justify-content: space-between; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 15px; }
        .target-num { font-family: 'Orbitron'; font-size: 1.2rem; font-weight: 700; color: #fff; }
        
        .algo-badge { font-size: 0.7rem; color: var(--text-dim); text-transform: uppercase; letter-spacing: 2px; }
        .main-prediction { font-family: 'Orbitron'; font-weight: 900; font-size: 4rem; color: var(--primary); text-shadow: 0 0 30px var(--primary); margin: 10px 0; }
        .main-prediction.is-red { color: var(--loss); text-shadow: 0 0 30px var(--loss); }

        /* METERS */
        .meters-row { display: flex; gap: 10px; margin-bottom: 15px; }
        .meter-box { flex: 1; background: #000; border: 1px solid var(--primary); padding: 10px; border-radius: 8px; }
        .m-head { display: flex; justify-content: space-between; font-size: 0.6rem; color: #888; font-weight: 700; }
        .m-bar { height: 4px; background: #222; border-radius: 2px; margin-top: 5px; overflow: hidden; }
        .m-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.5s; }
        .m-val { font-family: 'Orbitron'; font-size: 0.9rem; font-weight: 700; margin-top: 5px; text-align: left; }

        /* GRID */
        .pattern-box { border: 1px solid #333; border-radius: 10px; padding: 15px; margin-bottom: 20px; background: #080808; }
        .pattern-grid { display: flex; justify-content: center; gap: 5px; }
        .p-block { width: 45px; height: 40px; display: flex; align-items: center; justify-content: center; font-family: 'Orbitron'; font-weight: 700; border-radius: 4px; font-size: 1.2rem; background: #111; border: 1px solid #333; color: #666; }
        .p-block.is-green { border-color: var(--win); color: var(--win); box-shadow: inset 0 0 10px rgba(0,255,0,0.2); }
        .p-block.is-red { border-color: var(--loss); color: var(--loss); box-shadow: inset 0 0 10px rgba(255,0,0,0.2); }

        /* JACKPOT */
        .seeds-container { display: flex; justify-content: center; gap: 30px; margin-top: 15px; }
        .seed-circle { width: 60px; height: 60px; border-radius: 50%; border: 2px solid var(--primary); display: flex; align-items: center; justify-content: center; font-family: 'Orbitron'; font-size: 2rem; font-weight: 900; box-shadow: 0 0 15px var(--primary); }

        /* ARCHIVE */
        .archive-list { display: flex; flex-direction: column; gap: 10px; }
        .history-card {
            background: #0e0e0e; border-radius: 10px; padding: 15px; 
            border-left: 4px solid #333; display: flex; justify-content: space-between; align-items: center;
        }
        .hc-win { border-left-color: var(--win); }
        .hc-loss { border-left-color: var(--loss); }
        .hc-analyzing { border-left-color: #00ffff; }

        .hc-left { display: flex; flex-direction: column; }
        .hc-period { font-size: 0.75rem; color: #666; font-weight: 700; margin-bottom: 2px; }
        .hc-pred { font-family: 'Orbitron'; font-weight: 700; font-size: 1.2rem; color: #fff; }
        .hc-result { font-size: 0.75rem; font-weight: 700; margin-top: 2px; }
        
        .hc-icon i { font-size: 24px; }
        .icon-win { color: var(--win); filter: drop-shadow(0 0 5px var(--win)); }
        .icon-loss { color: var(--loss); filter: drop-shadow(0 0 5px var(--loss)); }
        .spin { animation: spin 1s infinite linear; color: #00ffff; }

        /* NAVBAR */
        .navbar {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 90%; max-width: 450px;
            background: #080808; border: 1px solid var(--primary); border-radius: 40px;
            display: flex; justify-content: space-between; padding: 12px 25px;
            box-shadow: 0 0 20px var(--primary-dim); z-index: 200;
        }
        .nav-item { color: #555; transition: 0.3s; cursor: pointer; display: flex; flex-direction: column; align-items: center; }
        .nav-item i { font-size: 20px; margin-bottom: 2px; }
        .nav-item.active { color: var(--primary); filter: drop-shadow(0 0 5px var(--primary)); transform: translateY(-2px); }

        /* THEMES */
        .themes-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .theme-btn { padding: 15px; border: 1px solid #333; border-radius: 8px; text-align: center; font-weight: 700; cursor: pointer; background: #111; color: #fff; }

        /* PROFILE */
        .stat-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        .stat-box { background: #111; border: 1px solid #333; padding: 15px; border-radius: 10px; text-align: center; }
        .stat-num { font-family: 'Orbitron'; font-size: 1.8rem; font-weight: 700; display: block; }
        .stat-lbl { font-size: 0.7rem; color: #888; }

        @keyframes spin { 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="theme-green">

    <div class="top-bar">
        <div class="app-title">DARKNET SUPREME</div>
        <div class="app-subtitle">AI COMMANDER v9.9</div>
        <div class="timer-box">
            <span class="timer-label">SEC TO DRAW</span>
            <span class="timer-val" id="timer">00</span>
        </div>
    </div>

    <div class="content-area" id="app-content"></div>

    <div class="navbar">
        <div class="nav-item active" onclick="switchTab('terminal')"><i class="fa-solid fa-microchip"></i></div>
        <div class="nav-item" onclick="switchTab('archive')"><i class="fa-solid fa-list-check"></i></div>
        <div class="nav-item" onclick="switchTab('themes')"><i class="fa-solid fa-palette"></i></div>
        <div class="nav-item" onclick="switchTab('profile')"><i class="fa-solid fa-id-badge"></i></div>
    </div>

    <script>
        const API_URL = "https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json?pageSize=20";

        // STATE
        let activeTab = 'terminal';
        let history = JSON.parse(localStorage.getItem('trx_hist_final')) || [];
        let stats = JSON.parse(localStorage.getItem('trx_stats_final')) || { w:0, l:0, j:0 };
        let currentPred = { p:"WAIT", n:["-","-"], period:"----", method:"SYSTEM INIT" };
        let lastPeriod = null;
        let meters = { vol:0, str:0 };
        let liveGrid = [0,0,0,0,0,0];

        function save() {
            localStorage.setItem('trx_hist_final', JSON.stringify(history));
            localStorage.setItem('trx_stats_final', JSON.stringify(stats));
        }

        async function engine() {
            try {
                // INSTANT FETCH
                const res = await fetch(API_URL + "&ts=" + Date.now());
                const json = await res.json();
                const list = json.data.list;
                const latest = list[0];
                const issue = latest.issueNumber;
                const num = parseInt(latest.number);
                const size = num >= 5 ? 'BIG' : 'SMALL';
                const color = [1,3,7,9].includes(num) ? 'GREEN' : (num===5?'GREEN':'RED');

                // 1. UPDATE LIVE DATA
                liveGrid = list.slice(0, 6).map(i => parseInt(i.number));
                calcMeters(list);

                // 2. CHECK RESULT
                if(history.length > 0 && history[0].status === 'analyzing') {
                    if(history[0].period === issue) {
                        const win = history[0].pred === (history[0].type==='SIZE' ? size : color);
                        history[0].status = win ? 'win' : 'loss';
                        history[0].result = num;
                        if(win) { stats.w++; if(history[0].nums.includes(num)) stats.j++; }
                        else stats.l++;
                        save(); render();
                    }
                }

                // 3. PREDICT NEXT
                const nextIssue = (BigInt(issue) + 1n).toString();
                if(lastPeriod !== issue) {
                    lastPeriod = issue;
                    
                    // LOGIC
                    let sCount = 0; let cCount = 0;
                    for(let i=0; i<10; i++) {
                        let n = parseInt(list[i].number);
                        if((n>=5?'BIG':'SMALL') === size) sCount++;
                        let c = [1,3,7,9].includes(n)?'GREEN':(n===5?'GREEN':'RED');
                        if(c === color) cCount++;
                    }

                    let pred = "", type = "SIZE", algo = "AI SNIPER V4";
                    let isZigZag = (list[0].number>=5) !== (list[1].number>=5);

                    if(cCount >= sCount && !isZigZag) { pred=color; type='COLOR'; algo="COLOR FLOW"; }
                    else {
                        if(isZigZag) { pred = size==='BIG'?'SMALL':'BIG'; algo="ANTI-CHOP"; }
                        else { pred = size; algo="TREND FOLLOW"; }
                    }

                    const n1 = (num+3)%10; const n2 = (num+7)%10;
                    currentPred = { period:nextIssue, p:pred, n:[n1,n2], method:algo };

                    history.unshift({ period:nextIssue, pred:pred, type:type, method:algo, nums:[n1,n2], status:'analyzing', result:'?' });
                    if(history.length>25) history.pop();
                    save(); render();
                }

            } catch(e) {}
        }

        function calcMeters(list) {
            let switches = 0;
            for(let i=0; i<9; i++) {
                if((parseInt(list[i].number)>=5) !== (parseInt(list[i+1].number)>=5)) switches++;
            }
            meters.vol = Math.min(100, switches*12);
            let streak = 1;
            let t = parseInt(list[0].number)>=5;
            for(let i=1; i<10; i++) { if((parseInt(list[i].number)>=5) === t) streak++; else break; }
            meters.str = Math.min(100, streak*20);
        }

        function render() {
            const el = document.getElementById('app-content');
            
            if(activeTab === 'terminal') {
                let gridHTML = liveGrid.map(n => {
                    let cls = [1,3,5,7,9].includes(n) ? 'is-green' : 'is-red';
                    return `<div class="p-block ${cls}">${n}</div>`;
                }).join('');

                el.innerHTML = `
                <div class="terminal-card">
                    <div class="target-box">
                        <span style="font-size:0.8rem; color:var(--text-dim)">TARGET</span>
                        <span class="target-num">${currentPred.period}</span>
                    </div>
                    <div class="algo-badge">${currentPred.method}</div>
                    <div class="main-prediction ${currentPred.p === 'RED' || currentPred.p === 'SMALL' ? 'is-red' : ''}">${currentPred.p}</div>
                    
                    <div class="pattern-box">
                        <div class="pattern-title" style="text-align:center; color:var(--primary); font-weight:700; margin-bottom:10px;">LIVE STREAM (REAL)</div>
                        <div class="pattern-grid">${gridHTML}</div>
                        
                        <div class="meters-row">
                            <div class="meter-box">
                                <div class="m-head"><span>STRENGTH</span><span>${meters.str}%</span></div>
                                <div class="m-bar"><div class="m-fill" style="width:${meters.str}%"></div></div>
                            </div>
                            <div class="meter-box" style="border-color:var(--loss)">
                                <div class="m-head"><span>VOLATILITY</span><span>${meters.vol}%</span></div>
                                <div class="m-bar"><div class="m-fill" style="width:${meters.vol}%; background:var(--loss)"></div></div>
                            </div>
                        </div>
                    </div>

                    <div class="jackpot-section">
                        <div class="jackpot-title" style="text-align:center; color:var(--text-dim); font-size:0.7rem; letter-spacing:2px; font-weight:700; margin-bottom:10px;">JACKPOT SEEDS</div>
                        <div class="seeds-container">
                            <div class="seed-circle">${currentPred.n[0]}</div>
                            <div class="seed-circle">${currentPred.n[1]}</div>
                        </div>
                    </div>
                </div>`;
            } 
            else if(activeTab === 'archive') {
                let html = '<div class="archive-list">';
                history.forEach(h => {
                    let icon = '', cls = '';
                    let resTxt = '';

                    if(h.status === 'analyzing') {
                        cls = 'hc-analyzing';
                        icon = '<i class="fa-solid fa-spinner spin"></i>';
                        resTxt = '<span style="color:#00ffff">ANALYZING...</span>';
                    } else if(h.status === 'win') {
                        cls = 'hc-win';
                        icon = '<i class="fa-solid fa-trophy icon-win"></i>';
                        resTxt = `<span class="hc-res-win">WIN (${h.result})</span>`;
                    } else {
                        cls = 'hc-loss';
                        icon = '<i class="fa-solid fa-skull icon-loss"></i>';
                        resTxt = `<span class="hc-res-loss">LOSS (${h.result})</span>`;
                    }

                    html += `
                    <div class="history-card ${cls}">
                        <div class="hc-left">
                            <span class="hc-period">#${h.period}</span>
                            <span class="hc-pred">${h.pred}</span>
                            <span class="hc-result">${resTxt}</span>
                        </div>
                        <div class="hc-icon">${icon}</div>
                    </div>`;
                });
                html += '</div>';
                el.innerHTML = html;
            }
            else if(activeTab === 'themes') {
                el.innerHTML = `
                <div class="themes-grid">
                    <div class="theme-btn" style="border-color:#00ff00; color:#00ff00" onclick="setTheme('theme-green')">NEON GREEN</div>
                    <div class="theme-btn" style="border-color:#ff0055; color:#ff0055" onclick="setTheme('theme-crimson')">CRIMSON RED</div>
                    <div class="theme-btn" style="border-color:#00ffff; color:#00ffff" onclick="setTheme('theme-cyan')">CYBER CYAN</div>
                    <div class="theme-btn" style="border-color:#ffd700; color:#ffd700" onclick="setTheme('theme-gold')">ROYAL GOLD</div>
                    <div class="theme-btn" style="border-color:#bf00ff; color:#bf00ff" onclick="setTheme('theme-purple')">ULTRA PURPLE</div>
                    <div class="theme-btn" style="border-color:#0088ff; color:#0088ff" onclick="setTheme('theme-blue')">OCEAN BLUE</div>
                </div>`;
            }
            else if(activeTab === 'profile') {
                el.innerHTML = `
                <div class="stat-grid">
                    <div class="stat-box" style="border-color:var(--win)">
                        <span class="stat-num" style="color:var(--win)">${stats.w}</span>
                        <span class="stat-lbl">TOTAL WINS</span>
                    </div>
                    <div class="stat-box" style="border-color:var(--loss)">
                        <span class="stat-num" style="color:var(--loss)">${stats.l}</span>
                        <span class="stat-lbl">TOTAL LOSS</span>
                    </div>
                    <div class="stat-box" style="border-color:#ffd700; grid-column:span 2">
                        <span class="stat-num" style="color:#ffd700">${stats.j}</span>
                        <span class="stat-lbl">JACKPOT HITS</span>
                    </div>
                </div>`;
            }
        }

        function switchTab(tab) {
            activeTab = tab;
            const navs = document.querySelectorAll('.nav-item');
            navs.forEach((n, i) => {
                if(['terminal','archive','themes','profile'][i] === tab) n.classList.add('active');
                else n.classList.remove('active');
            });
            render();
        }

        function setTheme(name) { document.body.className = name; }

        setInterval(() => {
            const s = new Date().getSeconds();
            document.getElementById('timer').innerText = (60 - s).toString().padStart(2, '0');
            if(s === 1) engine();
        }, 1000);

        engine(); render();

    </script>
</body>
</html>
