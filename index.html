<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>DARKNET SUPREME COMMANDER</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@500;900&display=swap" rel="stylesheet">

<style>
    :root {
        --primary: #00ff9c;
        --red: #ff2b2b;
        --bg: #050708;
        --card: #0b0f12;
        --glow-green: 0 0 15px rgba(0,255,156,.7);
        --glow-red: 0 0 15px rgba(255,43,43,.7);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }
    
    body {
        background-color: var(--bg);
        color: #fff;
        font-family: 'Share Tech Mono', monospace;
        height: 100vh;
        overflow: hidden;
        display: flex;
        flex-direction: column;
    }

    /* --- HEADER --- */
    header {
        padding: 15px;
        text-align: center;
        border-bottom: 2px solid var(--primary);
        font-family: 'Orbitron';
        letter-spacing: 2px;
        font-size: 18px;
        background: rgba(0,0,0,0.8);
    }

    /* --- MAIN AREA --- */
    #main-content {
        flex: 1;
        overflow-y: auto;
        padding: 20px;
        padding-bottom: 80px;
    }

    /* --- AURA (TERMINAL) --- */
    .aura {
        background: linear-gradient(135deg,#003b26,#000);
        border: 2px solid var(--primary);
        box-shadow: var(--glow-green);
        padding: 20px;
        border-radius: 15px;
        text-align: center;
        position: relative;
        margin-bottom: 20px;
        transition: 0.3s;
    }
    .aura.red {
        background: linear-gradient(135deg,#3b0000,#000);
        border-color: var(--red);
        box-shadow: var(--glow-red);
    }
    .aura.wait {
        background: #111;
        border-color: #555;
        box-shadow: none;
    }

    .sec-box {
        position: absolute;
        top: 15px;
        right: 15px;
        border: 2px solid #fff;
        padding: 5px 10px;
        border-radius: 8px;
        font-weight: bold;
    }

    .pred-text {
        font-family: 'Orbitron';
        font-size: 48px;
        font-weight: 900;
        margin: 15px 0;
        text-shadow: 0 0 20px currentColor;
    }
    .pred-text.BIG { color: var(--primary); }
    .pred-text.SMALL { color: var(--red); }
    .pred-text.WAIT { color: #888; font-size: 32px; animation: blink 1s infinite; }

    /* --- STREAK BAR --- */
    .streak-bar {
        background: #0a0a0a;
        border: 1px solid #333;
        padding: 10px;
        border-radius: 10px;
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
        font-size: 14px;
    }

    /* --- CARDS --- */
    .card {
        background: var(--card);
        border: 1px solid var(--primary);
        box-shadow: 0 0 10px rgba(0,255,156,0.2);
        padding: 15px;
        border-radius: 12px;
        margin-bottom: 12px;
        position: relative;
        animation: slideIn 0.3s ease;
    }
    .card.loss {
        border-color: var(--red);
        box-shadow: 0 0 10px rgba(255,43,43,0.2);
    }
    .card-icon {
        position: absolute;
        right: 15px;
        top: 15px;
        font-size: 24px;
    }

    /* --- NAV --- */
    nav {
        position: fixed;
        bottom: 0;
        width: 100%;
        background: #000;
        border-top: 2px solid var(--primary);
        padding: 15px 0;
        display: flex;
        justify-content: space-around;
        z-index: 100;
    }
    nav i {
        font-size: 22px;
        color: #555;
        cursor: pointer;
        transition: 0.3s;
    }
    nav i.active {
        color: var(--primary);
        text-shadow: 0 0 10px var(--primary);
        transform: translateY(-3px);
    }

    /* --- UTILS --- */
    @keyframes blink { 50% { opacity: 0.5; } }
    @keyframes slideIn { from { opacity:0; transform:translateY(20px); } to { opacity:1; transform:translateY(0); } }
    
    #confetti { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 999; }
    .particle { position: absolute; width: 8px; height: 8px; border-radius: 50%; animation: rain 3s linear forwards; }
    @keyframes rain { to { transform: translateY(100vh) rotate(720deg); } }

    .view-section { display: none; }
    .view-section.active { display: block; }
</style>
</head>
<body>

    <div id="confetti"></div>

    <header>DARKNET SUPREME</header>

    <div id="main-content">
        
        <div id="view-terminal" class="view-section active">
            <div id="main-aura" class="aura">
                <div class="sec-box">SEC <span id="timer">00</span></div>
                <div style="font-size:12px; color:#aaa; margin-top:5px;">TARGET: <span id="target-id">----</span></div>
                
                <div id="prediction" class="pred-text WAIT">WAIT</div>
                
                <div style="font-size:14px; letter-spacing:1px;" id="method">SYSTEM READY</div>
                
                <div style="margin-top:15px; border-top:1px solid rgba(255,255,255,0.1); padding-top:10px;">
                    <small>JACKPOT SEEDS</small><br>
                    <b id="seeds" style="font-size:18px; color:#fff">--, --</b>
                </div>
            </div>

            <div class="streak-bar">
                <span><i class="fa-solid fa-trophy" style="color:var(--primary)"></i> WINS: <b id="win-count">0</b></span>
                <span><i class="fa-solid fa-triangle-exclamation" style="color:var(--red)"></i> LOSS: <b id="loss-count">0</b></span>
            </div>

            <div id="logs-container">
                </div>
        </div>

        <div id="view-archive" class="view-section">
            <h3 style="text-align:center; margin-bottom:15px; color:var(--primary)">FULL HISTORY</h3>
            <div id="full-history"></div>
        </div>

    </div>

    <nav>
        <i class="fa-solid fa-terminal active" onclick="switchTab('terminal', this)"></i>
        <i class="fa-solid fa-clock-rotate-left" onclick="switchTab('archive', this)"></i>
        <i class="fa-solid fa-chart-line"></i>
        <i class="fa-solid fa-user-secret" onclick="clearData()"></i>
    </nav>

<script>
    // --- FIREBASE CONFIG ---
    const firebaseConfig = {
        apiKey: "AIzaSyA8qJ3qJl5fzbOBKopx99zsACkEGofbfyY",
        authDomain: "admin-91a73.firebaseapp.com",
        databaseURL: "https://admin-91a73-default-rtdb.firebaseio.com",
        projectId: "admin-91a73",
        storageBucket: "admin-91a73.firebasestorage.app",
        messagingSenderId: "153529788738",
        appId: "1:153529788738:web:65363636579881912940db",
        measurementId: "G-N4T0HV7ER1"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // --- STATE MANAGEMENT (With LocalStorage) ---
    let history = JSON.parse(localStorage.getItem('dns_history')) || [];
    let stats = JSON.parse(localStorage.getItem('dns_stats')) || { w: 0, l: 0 };
    let lossStreak = parseInt(localStorage.getItem('dns_streak')) || 0;
    
    let lastIssue = null;
    let currentPred = { p: "WAIT", n: ["-","-"], m: "SCANNING" };

    function saveData() {
        localStorage.setItem('dns_history', JSON.stringify(history));
        localStorage.setItem('dns_stats', JSON.stringify(stats));
        localStorage.setItem('dns_streak', lossStreak);
    }

    async function sync(data) {
        try {
            const ref = db.ref('rounds/' + data.issue);
            const snap = await ref.once('value');
            if(!snap.exists()) ref.set(data);
        } catch(e) {}
    }

    // --- THE GIDDAR SINGHI (ALGORITHM) ---
    function getStrategy(list, lastWin) {
        const recent = list.slice(0, 10);
        const lastNum = parseInt(recent[0].number);
        const lastSize = lastNum >= 5 ? 'BIG' : 'SMALL';
        
        // 1. Time Seed
        const d = new Date();
        const seed = d.getMinutes() + d.getSeconds();
        
        // 2. Determine Mode
        let pred = "";
        let method = "";
        
        // *** EMERGENCY BREAKER (If Streak >= 2) ***
        if (lossStreak >= 2) {
            // Agar 2 baar lagatar haar gaye, to algorithm choro, TREND pakro.
            // Kyunki market "Dragon" bana rahi hogi.
            pred = lastSize; 
            method = `ðŸš¨ L${lossStreak+1} FORCE RECOVERY`;
        } 
        else if (!lastWin) {
            // *** L2 FIXER (Smart Inverse) ***
            // Agar L1 hara, to Time Logic ka ulat karo (Cut Strategy)
            if (seed % 2 === 0) {
                pred = lastSize === 'BIG' ? 'SMALL' : 'BIG';
                method = "L2 TIME CUT";
            } else {
                pred = lastSize;
                method = "L2 TIME FLOW";
            }
        } 
        else {
            // *** L1 SNIPER (Safe Entry) ***
            // Sirf tab trade lo jab Time aur Trend same hon
            let trendDir = lastSize;
            let timeDir = (seed % 2 !== 0) ? 'BIG' : 'SMALL';
            
            if(trendDir === timeDir) {
                pred = trendDir;
                method = "TIME+TREND SYNC";
            } else {
                return null; // WAIT
            }
        }

        // Jackpot Mirror (0=5, 1=6)
        let n1 = (lastNum + 5) % 10;
        let n2 = (lastNum + 7) % 10;
        
        return { p: pred, n: [n1, n2], m: method };
    }

    // --- CORE LOOP ---
    async function engine() {
        try {
            const res = await fetch("https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json?pageSize=20&ts=" + Date.now());
            const json = await res.json();
            const list = json.data.list;
            const latest = list[0];
            const issue = latest.issueNumber;
            const resNum = parseInt(latest.number);
            const resSize = resNum >= 5 ? 'BIG' : 'SMALL';

            // 1. CHECK PREVIOUS RESULT
            if (history.length > 0 && history[0].status === 'pending' && history[0].issue === issue) {
                const win = history[0].pred === resSize;
                
                if(win) {
                    history[0].status = 'win';
                    stats.w++;
                    lossStreak = 0; // Reset streak
                    fireConfetti();
                } else {
                    history[0].status = 'loss';
                    stats.l++;
                    lossStreak++; // Increase streak
                }
                history[0].result = `${resNum} (${resSize})`;
                
                saveData();
                render();
            }

            // 2. PREDICT NEXT
            if (lastIssue !== issue) {
                lastIssue = issue;
                const nextIssue = (BigInt(issue) + 1n).toString();
                
                // Determine L2 status
                let prevWin = history.length > 0 ? (history[0].status === 'win') : true;
                
                const strat = getStrategy(list, prevWin);
                
                // Sync data
                sync({ issue: issue, number: resNum, size: resSize, time: Date.now() });

                if (strat) {
                    currentPred = strat;
                    history.unshift({
                        issue: nextIssue,
                        pred: strat.p,
                        seeds: strat.n,
                        method: strat.m,
                        status: 'pending',
                        result: '?'
                    });
                } else {
                    currentPred = { p: "WAIT", n: ["-","-"], m: "SAFE MODE" };
                }
                
                if(history.length > 30) history.pop();
                saveData();
                render();
            }

        } catch(e) {}
    }

    // --- UI RENDERER ---
    function render() {
        // Main Display
        document.getElementById('target-id').innerText = (BigInt(lastIssue||0) + 1n).toString().slice(-4);
        const pEl = document.getElementById('prediction');
        pEl.innerText = currentPred.p;
        pEl.className = `pred-text ${currentPred.p}`;
        
        document.getElementById('method').innerText = currentPred.m;
        document.getElementById('seeds').innerText = currentPred.n.join(', ');
        
        // Aura Color
        const aura = document.getElementById('main-aura');
        aura.className = 'aura';
        if(currentPred.p === 'SMALL') aura.classList.add('red');
        if(currentPred.p === 'WAIT') aura.classList.add('wait');

        // Stats
        document.getElementById('win-count').innerText = stats.w;
        document.getElementById('loss-count').innerText = stats.l;

        // Cards
        const html = history.map(h => {
            if(h.status === 'pending') return '';
            const isWin = h.status === 'win';
            const color = isWin ? 'var(--primary)' : 'var(--red)';
            const icon = isWin ? 'fa-trophy' : 'fa-xmark';
            
            return `
            <div class="card ${h.status}">
                <i class="fa-solid ${icon} card-icon" style="color:${color}"></i>
                <div style="font-size:12px; color:#aaa">PERIOD ${h.issue.slice(-4)}</div>
                <h2 style="color:${color}">${h.pred}</h2>
                <div style="font-size:12px; margin-top:5px;">STRATEGY: ${h.method}</div>
                <div style="margin-top:5px; font-weight:bold; color:${color}">RESULT: ${h.result}</div>
            </div>`;
        }).join('');

        document.getElementById('logs-container').innerHTML = html;
        document.getElementById('full-history').innerHTML = html;
    }

    // --- SYSTEM ---
    function switchTab(tab, el) {
        document.querySelectorAll('.view-section').forEach(d => d.classList.remove('active'));
        document.getElementById('view-'+tab).classList.add('active');
        
        document.querySelectorAll('nav i').forEach(i => i.classList.remove('active'));
        el.classList.add('active');
    }

    function fireConfetti() {
        const c = document.getElementById('confetti');
        for(let i=0; i<50; i++) {
            let p = document.createElement('div');
            p.className = 'particle';
            p.style.left = Math.random()*100+'%';
            p.style.background = `hsl(${Math.random()*360},100%,50%)`;
            p.style.animationDuration = Math.random()*2+1+'s';
            c.appendChild(p);
            setTimeout(()=>p.remove(), 3000);
        }
    }

    function clearData() {
        if(confirm('Reset Data?')) {
            localStorage.clear();
            location.reload();
        }
    }

    setInterval(() => {
        const s = 60 - new Date().getSeconds();
        document.getElementById('timer').innerText = s.toString().padStart(2, '0');
        if(s === 1 || s === 59) engine();
    }, 1000);

    // Init
    engine();
    render();

</script>
</body>
</html>
