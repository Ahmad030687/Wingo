<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Darknet Supreme | Time Engine</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* --- UI FROM YOUR SCREENSHOTS (Darknet Supreme) --- */
        :root {
            --primary: #00ff00; --primary-dim: rgba(0, 255, 0, 0.1);
            --bg-color: #050505; --card-bg: #0a0a0a;
            --text-main: #ffffff; --loss: #ff3333; --win: #00ff00; --analyzing: #00f3ff;
        }
        body.theme-crimson { --primary: #ff0055; --win: #ff0055; }
        body.theme-cyan { --primary: #00ffff; --win: #00ffff; }
        
        * { box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; font-family: 'Rajdhani', sans-serif; background-color: var(--bg-color); color: var(--text-main); height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

        /* HEADER */
        .top-bar { padding: 15px; border-bottom: 2px solid var(--primary); background: linear-gradient(180deg, #000 0%, rgba(0,50,0,0.1) 100%); z-index: 100; display: flex; justify-content: space-between; align-items: center; }
        .app-title { font-family: 'Orbitron'; font-weight: 900; font-size: 1.2rem; color: var(--primary); letter-spacing: 1px; }
        .timer-box { border: 1px solid var(--primary); padding: 5px 12px; border-radius: 5px; background: #000; }
        .timer-val { font-family: 'Orbitron'; font-weight: 700; font-size: 1.2rem; }

        .content-area { flex: 1; overflow-y: auto; padding: 20px; padding-bottom: 100px; }
        
        /* TERMINAL CARD */
        .terminal-card { border: 1px solid var(--primary); border-radius: 15px; padding: 20px; background: radial-gradient(circle at center, var(--primary-dim) 0%, #000 100%); box-shadow: 0 0 20px var(--primary-dim); text-align: center; margin-bottom: 20px; }
        .target-box { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 20px; }
        .target-num { background: #111; border: 1px solid var(--primary); padding: 5px 15px; border-radius: 5px; font-family: 'Orbitron'; font-size: 1.2rem; font-weight: 700; }
        
        .main-prediction { font-family: 'Orbitron'; font-weight: 900; font-size: 4rem; color: var(--primary); text-shadow: 0 0 30px var(--primary); margin: 15px 0; }
        .main-prediction.wait { color: #666; font-size: 3rem; animation: pulse 1s infinite; text-shadow: none; }
        @keyframes pulse { 50% { opacity: 0.5; } }

        .jackpot-section { margin-top: 15px; border-top: 1px solid #333; padding-top: 20px; }
        .seed-circle { width: 70px; height: 70px; border-radius: 50%; background: var(--primary); color: #000; display: flex; align-items: center; justify-content: center; font-family: 'Orbitron'; font-size: 2.2rem; font-weight: 900; box-shadow: 0 0 20px var(--primary); display: inline-flex; margin: 0 10px; }

        /* ARCHIVE LIST */
        .archive-list { display: flex; flex-direction: column; gap: 12px; }
        .history-card { background: #0e0e0e; border-radius: 12px; padding: 18px; border-left: 5px solid #333; display: flex; justify-content: space-between; align-items: center; }
        .hc-win { border-left-color: var(--win); background: linear-gradient(90deg, rgba(0,255,0,0.1), transparent); }
        .hc-loss { border-left-color: var(--loss); background: linear-gradient(90deg, rgba(255,0,0,0.1), transparent); }
        
        .res-circle { width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.4rem; border: 2px solid #333; }
        .circle-win { border-color: var(--win); background: rgba(0,255,0,0.1); box-shadow: 0 0 10px var(--win); }
        .circle-loss { border-color: var(--loss); background: rgba(255,0,0,0.1); box-shadow: 0 0 10px var(--loss); }
        .loader-ring { width: 25px; height: 25px; border: 3px solid #111; border-top: 3px solid var(--analyzing); border-radius: 50%; animation: spin 0.8s linear infinite; }

        /* NAVBAR */
        .navbar { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 90%; max-width: 450px; background: #080808; border: 1px solid var(--primary); border-radius: 40px; display: flex; justify-content: space-between; padding: 12px 25px; z-index: 200; box-shadow: 0 0 20px var(--primary-dim); }
        .nav-item { color: #555; cursor: pointer; display: flex; flex-direction: column; align-items: center; transition: 0.3s; }
        .nav-item.active { color: var(--primary); filter: drop-shadow(0 0 5px var(--primary)); }
        .nav-item svg { width: 24px; height: 24px; fill: currentColor; }

        /* CONFETTI */
        #confetti-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1000; overflow: hidden; }
        .confetti { position: absolute; width: 12px; height: 12px; top: -15px; border-radius: 2px; animation: fall linear forwards; }
        @keyframes fall { to { transform: translateY(110vh) rotate(720deg); } }

        @keyframes spin { 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="theme-green">

    <div id="confetti-container"></div>

    <div class="top-bar">
        <div class="app-title">DARKNET SUPREME</div>
        <div class="timer-box"><span class="timer-val" id="timer">--</span></div>
    </div>

    <div class="content-area" id="app-content"></div>

    <div class="navbar">
        <div class="nav-item active" onclick="switchTab('terminal')"><svg viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 18V6h16v12H4z"/><path d="M7.5 15H9v-4.5H7.5V15zm4.5 0h1.5V9H12v6zm4.5-3v3H18V9h-1.5v3z"/></svg></div>
        <div class="nav-item" onclick="switchTab('archive')"><svg viewBox="0 0 24 24"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/></svg></div>
        <div class="nav-item" onclick="switchTab('analytics')"><svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2v-5h2v5zm4 0h-2v-3h2v3z"/></svg></div>
        <div class="nav-item" onclick="switchTab('themes')"><svg viewBox="0 0 24 24"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8z"/></svg></div>
        <div class="nav-item" onclick="switchTab('profile')"><svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg></div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyA8qJ3qJl5fzbOBKopx99zsACkEGofbfyY",
            authDomain: "admin-91a73.firebaseapp.com",
            databaseURL: "https://admin-91a73-default-rtdb.firebaseio.com",
            projectId: "admin-91a73",
            storageBucket: "admin-91a73.firebasestorage.app",
            messagingSenderId: "153529788738",
            appId: "1:153529788738:web:65363636579881912940db",
            measurementId: "G-N4T0HV7ER1"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let activeTab = 'terminal';
        let history = []; 
        let stats = { win: 0, loss: 0, jack: 0, double: 0 };
        let lastFetchedIssue = null;
        let lastSavedIssue = null;
        let currentPred = { p: "WAIT", n: ["?", "?"], period: "----", m: "SYNCING" };

        async function syncToFirebase(data) {
            try {
                const ref = db.ref('rounds');
                const snap = await ref.orderByChild('issueNumber').equalTo(data.issueNumber).once('value');
                if(!snap.exists()) await ref.push(data);
            } catch(e) {}
        }

        // --- TIME-BASED PREDICTION ENGINE ---
        function calculateTimeStrategy(list, lastWin) {
            const recent = list.slice(0, 10);
            const lastNum = parseInt(recent[0].number);
            const lastSize = lastNum >= 5 ? 'BIG' : 'SMALL';
            
            // 1. TIME SEED (The Secret)
            const d = new Date();
            const timeSeed = d.getHours() + d.getMinutes(); // Simple time factor
            
            // 2. CHECK L1 STATUS
            // Agar pichla loss tha, to strategy aggressive karo (L2 Fixer)
            let isL2 = !lastWin;

            let pred = "";
            let method = "";

            if(isL2) {
                // *** L2 FIXER (TIME INVERSE) ***
                // Time based reversal logic
                if (timeSeed % 2 === 0) {
                     pred = lastSize === 'BIG' ? 'SMALL' : 'BIG'; // Reverse Trend
                     method = "TIME REVERSE L2";
                } else {
                     pred = lastSize; // Follow Trend
                     method = "TIME FLOW L2";
                }
            } else {
                // *** L1 STANDARD (TIME SYNC) ***
                // Sirf tab trade lo jab Time aur Trend match karein
                let trendDirection = lastSize; 
                let timeDirection = (timeSeed % 2 !== 0) ? 'BIG' : 'SMALL';
                
                if (trendDirection === timeDirection) {
                    pred = trendDirection;
                    method = "TIME+TREND SYNC";
                } else {
                    return null; // SKIP ROUND (WAIT)
                }
            }

            // JACKPOT (Time Offset)
            let n1 = (lastNum + d.getMinutes()) % 10; 
            let n2 = (lastNum + 7) % 10;

            return { p: pred, n: [n1, n2], m: method };
        }

        async function engineLoop() {
            try {
                const res = await fetch("https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json?pageSize=20&ts=" + Date.now());
                const json = await res.json();
                const list = json.data.list;
                const latest = list[0];
                const issue = latest.issueNumber;
                const num = parseInt(latest.number);

                // Auto Write
                if(lastSavedIssue !== issue) {
                    lastSavedIssue = issue;
                    syncToFirebase({ issueNumber: issue, number: num, size: num>=5?'BIG':'SMALL', time: Date.now() });
                }

                // Check Results
                let lastWin = true;
                if(history.length > 0 && history[0].status === 'analyzing' && history[0].period === issue) {
                    const actualSize = num >= 5 ? 'BIG' : 'SMALL';
                    const win = history[0].pred === actualSize;
                    const isJack = history[0].nums.includes(num);
                    
                    if(win) {
                        lastWin = true;
                        if(isJack) { history[0].status = 'double'; stats.double++; triggerConfetti(); }
                        else { history[0].status = 'win'; stats.win++; triggerConfetti(); }
                    } else {
                        lastWin = false;
                        history[0].status = 'loss'; stats.loss++;
                    }
                    history[0].result = num;
                    renderView();
                }

                // Predict Next
                if(lastFetchedIssue !== issue) {
                    lastFetchedIssue = issue;
                    const next = (BigInt(issue) + 1n).toString();
                    
                    // Pass Win/Loss status to Engine for L2 Fixer
                    let prevWinState = history.length > 0 ? (history[0].status === 'win' || history[0].status === 'double') : true;
                    
                    const logic = calculateTimeStrategy(list, prevWinState);

                    if (logic) {
                        currentPred = { p: logic.p, n: logic.n, period: next, m: logic.m };
                        history.unshift({ period: next, pred: logic.p, nums: logic.n, status: 'analyzing', result: null });
                    } else {
                        currentPred = { p: "WAIT", n: ["-", "-"], period: next, m: "TIME UNSYNC" };
                    }
                    
                    if(history.length > 20) history.pop();
                    renderView();
                }
            } catch(e) {}
        }

        function triggerConfetti() {
            const container = document.getElementById('confetti-container');
            for(let i=0; i<150; i++) {
                const conf = document.createElement('div');
                conf.className = 'confetti';
                conf.style.left = Math.random() * 100 + 'vw';
                conf.style.backgroundColor = ['#00ff00', '#ff0055', '#00ffff', '#ffd700', '#bf00ff'][Math.floor(Math.random()*5)];
                conf.style.animationDuration = (Math.random() * 2 + 1) + 's';
                container.appendChild(conf);
                setTimeout(() => conf.remove(), 3000);
            }
        }

        function renderView() {
            const container = document.getElementById('app-content');
            if(activeTab === 'terminal') {
                const waitClass = currentPred.p === "WAIT" ? "wait" : "";
                container.innerHTML = `
                    <div class="terminal-card">
                        <div class="target-box">
                            <span style="font-size:0.8rem; color:#888; letter-spacing:1px">TARGET PERIOD</span>
                            <span class="target-num">${currentPred.period.slice(-4)}</span>
                        </div>
                        <div class="main-prediction ${waitClass}" style="color:${currentPred.p === 'BIG' ? 'var(--win)' : (currentPred.p === 'SMALL' ? 'var(--loss)' : '#555')}">
                            ${currentPred.p}
                        </div>
                        <div style="font-size:0.8rem; color:var(--primary); letter-spacing:2px; margin-bottom:20px; text-transform:uppercase;">
                            ${currentPred.m}
                        </div>
                        <div class="jackpot-section">
                            <div style="font-size:0.7rem; color:#888; margin-bottom:10px;">TIME-SEED JACKPOT</div>
                            <div class="seed-circle">${currentPred.n[0]}</div>
                            <div class="seed-circle" style="background:var(--analyzing); box-shadow:0 0 15px var(--analyzing)">${currentPred.n[1]}</div>
                        </div>
                    </div>`;
            } else if(activeTab === 'archive') {
                container.innerHTML = `<div class="archive-list">` + history.map(h => {
                    let icon = ""; let cClass = "";
                    if(h.status === 'win') { icon = "‚úÖ"; cClass = "circle-win"; }
                    else if(h.status === 'loss') { icon = "‚ùå"; cClass = "circle-loss"; }
                    else if(h.status === 'jack') { icon = "üéâ"; cClass = "circle-win"; }
                    else if(h.status === 'double') { icon = "ü•≥"; cClass = "circle-win"; }
                    const resDisplay = h.status === 'analyzing' ? `<div class="loader-ring"></div>` : `<div class="res-circle ${cClass}">${icon}</div>`;
                    return `
                    <div class="history-card hc-${h.status}">
                        <div class="hc-left">
                            <span style="font-size:0.8rem; color:#888;">#${h.period.slice(-4)}</span>
                            <div style="font-family:'Orbitron'; font-size:1.3rem; font-weight:700; color:#fff">${h.pred} [${h.nums.join(',')}]</div>
                        </div>
                        <div class="hc-right">${resDisplay}</div>
                    </div>`;
                }).join('') + `</div>`;
            } else if(activeTab === 'themes') {
                container.innerHTML = `<div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
                    <button class="theme-btn" style="color:#00ff00; border-color:#00ff00" onclick="setTheme('theme-green')">GREEN</button>
                    <button class="theme-btn" style="color:#ff0055; border-color:#ff0055" onclick="setTheme('theme-crimson')">CRIMSON</button>
                    <button class="theme-btn" style="color:#00ffff; border-color:#00ffff" onclick="setTheme('theme-cyan')">CYAN</button>
                    <button class="theme-btn" style="color:#ffd700; border-color:#ffd700" onclick="setTheme('theme-gold')">GOLD</button>
                    <button class="theme-btn" style="color:#bf00ff; border-color:#bf00ff" onclick="setTheme('theme-purple')">PURPLE</button>
                </div>`;
            } else if(activeTab === 'profile') {
                container.innerHTML = `<div class="stat-grid">
                    <div class="stat-box" style="border-color:var(--win)"><span class="stat-num" style="color:var(--win)">${stats.win}</span><span>WINS</span></div>
                    <div class="stat-box" style="border-color:var(--loss)"><span class="stat-num" style="color:var(--loss)">${stats.loss}</span><span>LOSS</span></div>
                    <div class="stat-box" style="grid-column: span 2; border-color:#ffd700"><span class="stat-num" style="color:#ffd700">${stats.double}</span><span>DOUBLE WINS</span></div>
                </div>`;
            }
        }

        function switchTab(tab) {
            activeTab = tab;
            document.querySelectorAll('.nav-item').forEach((item, index) => {
                const tabs = ['terminal', 'archive', 'analytics', 'themes', 'profile'];
                item.classList.toggle('active', tabs[index] === tab);
            });
            renderView();
        }

        function setTheme(t) { document.body.className = t; }

        setInterval(() => {
            const s = 60 - new Date().getSeconds();
            document.getElementById('timer').innerText = s.toString().padStart(2, '0');
            if(s === 1 || s === 59) engineLoop();
        }, 1000);

        engineLoop();
        renderView();
    </script>
</body>
</html>
