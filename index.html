<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>V.FINAL GOD HAND</title>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
<style>
    /* --- THEME: ULTIMATE GOD MODE --- */
    :root { 
        --bg: #000; 
        --gold: #ffd700; 
        --neon: #39ff14; 
        --red: #ff073a; 
        --cyan: #00f3ff;
        --panel: #050505;
        --font: 'Courier New', monospace; 
    }
    
    * { margin:0; padding:0; box-sizing:border-box; font-family:var(--font); user-select:none; }
    body { background:var(--bg); color:var(--gold); min-height:100vh; overflow-x:hidden; display:flex; flex-direction:column; align-items:center; padding-bottom:70px; }
    
    /* HEXAGON GRID BG */
    body::before {
        content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background-image: radial-gradient(var(--panel) 15%, transparent 16%), radial-gradient(var(--panel) 15%, transparent 16%);
        background-size: 20px 20px; background-position: 0 0, 10px 10px; opacity: 0.2; z-index: -1;
    }

    /* HEADER */
    .header { width:100%; padding:15px; border-bottom:3px solid var(--gold); background:#000; position:sticky; top:0; z-index:100; display:flex; justify-content:space-between; align-items:center; box-shadow: 0 0 40px rgba(255, 215, 0, 0.3); }
    .title-box div { font-weight:900; letter-spacing:1px; }
    .timer { font-size:26px; font-weight:900; color:var(--gold); text-shadow:0 0 10px var(--gold); }

    /* PATTERN HUD */
    .pattern-hud { width:95%; max-width:450px; background:rgba(20,20,0,0.9); border:1px solid var(--gold); margin-top:15px; padding:15px; font-size:11px; text-align:center; position:relative; overflow:hidden; }
    .hud-label { color:#aaa; font-size:9px; letter-spacing:2px; margin-bottom:5px; }
    .active-pattern { font-size:24px; font-weight:bold; color:#fff; letter-spacing:5px; margin:5px 0; text-shadow:0 0 10px #fff; }
    .pattern-meaning { color:var(--neon); font-weight:bold; }

    /* CARD */
    .card { width:95%; max-width:450px; margin:20px 0; border:2px solid var(--gold); border-top:6px solid var(--gold); padding:25px; text-align:center; position:relative; background:#020202; box-shadow:0 0 50px rgba(255, 215, 0, 0.15); }
    
    /* OVERLAYS */
    .skip-overlay { display:none; position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index:10; flex-direction:column; justify-content:center; align-items:center; }
    .skip-big { font-size:50px; font-weight:900; color:#555; }
    
    .period-row { display:flex; justify-content:space-between; border-bottom:1px solid #333; padding-bottom:10px; margin-bottom:15px; font-size:12px; color:#fff; }
    
    .prediction { font-size:90px; font-weight:900; margin:10px 0; letter-spacing:-5px; background: -webkit-linear-gradient(#fff, var(--gold)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; filter: drop-shadow(0 0 15px rgba(255,215,0,0.6)); }
    
    .balls { display:flex; justify-content:center; gap:20px; margin:20px 0; }
    .ball { width:60px; height:60px; border:2px solid var(--gold); display:flex; align-items:center; justify-content:center; font-size:26px; font-weight:bold; box-shadow:inset 0 0 20px var(--gold); background:#000; color:#fff; border-radius:12px; }

    .logic-tag { font-size:12px; background:#111; border:1px solid var(--gold); color:var(--gold); padding:8px 15px; display:inline-block; margin-top:10px; text-transform:uppercase; font-weight:bold; letter-spacing:1px; }

    /* STATS GRID */
    .stats { display:grid; grid-template-columns:1fr 1fr; gap:10px; width:95%; max-width:450px; margin-bottom:20px; }
    .s-box { border:1px solid #333; background:#080808; padding:15px; text-align:center; border-radius:8px; }
    .s-val { font-size:22px; font-weight:bold; color:#fff; }
    .s-lbl { font-size:9px; color:var(--gold); letter-spacing:1px; }

    /* RAW TERMINAL LOGS */
    .log-container { width:95%; max-width:450px; margin-bottom:80px; font-family:'Courier New', monospace; background:#000; border-top:2px solid var(--gold); }
    .log-item { display:flex; justify-content:space-between; padding:8px 10px; border-bottom:1px dashed #333; font-size:12px; }
    .win-txt { color:var(--neon); font-weight:bold; }
    .loss-txt { color:var(--red); font-weight:bold; }
    .skip-txt { color:#555; font-style:italic; }

    /* NAV */
    .nav { position:fixed; bottom:0; left:0; width:100%; background:#000; border-top:3px solid var(--gold); padding:12px 0; display:flex; justify-content:space-around; z-index:999; box-shadow:0 -10px 40px rgba(0,0,0,1); }
    .nav-btn { background:none; border:none; color:#444; font-size:10px; font-weight:bold; cursor:pointer; display:flex; flex-direction:column; align-items:center; transition:0.3s; }
    .nav-btn.active { color:var(--gold); transform:scale(1.1); text-shadow:0 0 15px var(--gold); }

</style>
</head>
<body>

<div class="header">
    <div class="title-box">
        <div style="font-size:20px; color:#fff;">GOD HAND</div>
        <div style="font-size:10px; color:var(--gold);">V.FINAL PATTERN MAPPER</div>
    </div>
    <div class="timer" id="timer">00</div>
</div>

<div class="pattern-hud" id="patternHud">
    <div class="hud-label">DETECTED SEQUENCE (LAST 3)</div>
    <div class="active-pattern" id="seqDisplay">---</div>
    <div class="pattern-meaning" id="seqMeaning">WAITING FOR DATA...</div>
</div>

<div id="page-terminal" class="active">
    <div class="card" id="mainCard">
        <div class="skip-overlay" id="skipLayer">
            <div class="skip-big">SKIP</div>
            <div style="color:var(--gold); font-size:12px; letter-spacing:2px; margin-top:10px;">UNKNOWN PATTERN</div>
            <div style="color:#666; font-size:10px;">SAFETY PROTOCOL ACTIVE</div>
        </div>

        <div class="period-row">
            <span>TARGET: <b id="period">....</b></span>
            <span id="lvlDisplay" style="color:var(--gold)">L1: PATTERN MATCH</span>
        </div>
        
        <div class="prediction" id="pred">--</div>
        
        <div class="balls" id="balls">
            <div class="ball">?</div><div class="ball">?</div>
        </div>

        <div class="logic-tag" id="logic">SCANNING DATABASE...</div>
    </div>

    <div class="stats">
        <div class="s-box"><div class="s-val" id="wins">0</div><div class="s-lbl">SURESHOTS</div></div>
        <div class="s-box"><div class="s-val" id="l2wins">0</div><div class="s-lbl">RECOVERIES</div></div>
        <div class="s-box"><div class="s-val" id="acc" style="color:var(--neon)">100%</div><div class="s-lbl">ACCURACY</div></div>
        <div class="s-box"><div class="s-val" id="profit" style="color:var(--gold)">0</div><div class="s-lbl">NET PROFIT</div></div>
    </div>

    <div class="log-container" id="historyList"></div>
</div>

<div class="nav">
    <button class="nav-btn active"><span>⚡</span>TERMINAL</button>
    <button class="nav-btn" onclick="alert('System: V.FINAL \nLogic: Hash-Map Patterning \nStatus: LIFETIME ACTIVE')"><span>⚙️</span>SYSTEM</button>
</div>

<script>
const API = "https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json?ts=";
const BOSS_MAP = { 0:[5,2], 1:[6,3], 2:[7,4], 3:[8,0], 4:[9,1], 5:[0,7], 6:[1,8], 7:[2,9], 8:[3,5], 9:[4,6] };

// --- THE GOD HAND PATTERN DATABASE ---
// Ye wo database hai jo "Lifetime" chalta hai. Ye calculate nahi karta, ye match karta hai.
// B = BIG, S = SMALL
const PATTERN_DB = {
    "BBB": "BIG",   // Dragon Continue
    "SSS": "SMALL", // Dragon Continue
    "BBS": "BIG",   // 2-1 Flip Back
    "SSB": "SMALL", // 2-1 Flip Back
    "BSB": "BIG",   // ZigZag Break (Return to B)
    "SBS": "SMALL", // ZigZag Break (Return to S)
    "BSS": "SMALL", // 1-2 Stick
    "SBB": "BIG"    // 1-2 Stick
};

let lastIssue = "";
let activeBet = null;
let win = 0, l2Win = 0, total = 0, profit = 0;
let level = 1;
let firstLoad = true;

// Timer
setInterval(() => {
    let s = new Date().getSeconds();
    let r = 60 - s; if(r===60) r=0;
    let t = document.getElementById('timer');
    t.innerText = r<10 ? "0"+r : r;
    if(r<=10) t.style.color = "var(--red)";
    else t.style.color = "var(--gold)";
}, 1000);

// Core Loop
setInterval(async () => {
    try {
        let res = await fetch(API + Date.now());
        let data = await res.json();
        
        if(!data || !data.data || !data.data.list) return;
        let latest = data.data.list[0];
        
        if (latest.issueNumber !== lastIssue || firstLoad) {
            
            if (!firstLoad && activeBet && lastIssue !== "") {
                if(activeBet.pick === "SKIP") {
                    addLog(latest.issueNumber, "SKIP", "SKIPPED PATTERN", "SKIP", 0);
                } else {
                    checkWin(latest, activeBet);
                }
            }
            
            lastIssue = latest.issueNumber;
            firstLoad = false;
            
            runGodHand(data.data.list);
        }
    } catch(e) {}
}, 1000);

// --- GOD HAND ENGINE ---
function runGodHand(history) {
    if (history.length < 4) return; // Need at least 3 past results

    let lastN = parseInt(history[0].number);
    let nextNum = (BigInt(history[0].issueNumber) + 1n).toString().slice(-4);
    let [b1, b2] = BOSS_MAP[lastN];

    // 1. BUILD SEQUENCE (Pichle 3 results ka code)
    // h[0] is latest, h[1] is previous, h[2] is 3rd
    let r1 = parseInt(history[0].number) >= 5 ? "B" : "S"; // Latest
    let r2 = parseInt(history[1].number) >= 5 ? "B" : "S";
    let r3 = parseInt(history[2].number) >= 5 ? "B" : "S";
    
    // Sequence order: Oldest to Newest for reading (e.g., 3rd, 2nd, 1st)
    let sequenceCode = r3 + r2 + r1; // Example: "BBS"

    // UI Update
    document.getElementById('seqDisplay').innerText = sequenceCode.split('').join('-');

    let pick, logic;
    let skip = false;

    // 2. DECISION LOGIC
    if (level === 2) {
        // L2: ANTI-PATTERN (THE RECOVERY)
        // Agar Pattern ghalat hua, iska matlab market 'Opposite' mood mein hai.
        // Hum L2 par database ka 'Opposite' khelenge.
        
        let lastResult = parseInt(history[0].number) >= 5 ? "BIG" : "SMALL";
        
        // Simple Recovery: Follow the last result (Momentum) if Pattern fails
        pick = lastResult; 
        logic = "L2: GOD RECOVERY";

        document.getElementById('mainCard').style.borderColor = "var(--red)";
        document.getElementById('lvlDisplay').innerText = "⚠️ L2: FORCED WIN";
        document.getElementById('lvlDisplay').style.color = "var(--red)";
        document.getElementById('skipLayer').style.display = 'none'; // Never skip L2
    } 
    else {
        // L1: PATTERN MATCHING
        // Check if this sequence exists in our 'Winning Database'
        if (PATTERN_DB[sequenceCode]) {
            pick = PATTERN_DB[sequenceCode];
            logic = `MATCHED: [${sequenceCode}]`;
            document.getElementById('seqMeaning').innerText = "KNOWN PATTERN DETECTED";
            document.getElementById('seqMeaning').style.color = "var(--neon)";
            document.getElementById('skipLayer').style.display = 'none';
        } else {
            // UNKNOWN PATTERN -> SKIP
            // Ye wo jagah hai jahan losses rukenge.
            // Agar market kuch ajeeb kar rahi hai (e.g. BSBSB Zigzag confusion), hum nahi khelenge.
            pick = "SKIP";
            logic = "UNKNOWN SEQUENCE";
            skip = true;
            document.getElementById('seqMeaning').innerText = "UNKNOWN PATTERN - DANGEROUS";
            document.getElementById('seqMeaning').style.color = "#555";
            document.getElementById('skipLayer').style.display = 'flex';
        }
        
        document.getElementById('mainCard').style.borderColor = "var(--gold)";
        document.getElementById('lvlDisplay').innerText = "L1: PATTERN MATCH";
        document.getElementById('lvlDisplay').style.color = "var(--gold)";
    }

    // UPDATE UI
    document.getElementById('period').innerText = nextNum;
    
    if(!skip) {
        document.getElementById('pred').innerText = pick;
        document.getElementById('pred').style.color = pick==="BIG" ? "var(--neon)" : "var(--cyan)";
        document.getElementById('balls').innerHTML = `<div class="ball">${b1}</div><div class="ball">${b2}</div>`;
    }
    
    document.getElementById('logic').innerText = logic;

    activeBet = { pick: pick, level: level, logic: logic };
}

function checkWin(actual, bet) {
    let res = parseInt(actual.number) >= 5 ? "BIG" : "SMALL";
    let isWin = (res === bet.pick);
    total++;

    if (isWin) {
        if(bet.level === 1) win++; else l2Win++;
        profit += (bet.level === 1 ? 100 : 300);
        level = 1;
        confetti({ particleCount: 300, spread: 150, colors: ['#ffd700', '#ffffff'] });
    } else {
        level = level === 1 ? 2 : 1; 
    }

    document.getElementById('wins').innerText = win;
    document.getElementById('l2wins').innerText = l2Win;
    document.getElementById('profit').innerText = profit;
    document.getElementById('acc').innerText = Math.round(((win+l2Win)/total)*100) + "%";

    addLog(actual.issueNumber, res, bet.pick, isWin, bet.level, bet.logic);
}

function addLog(issue, res, pick, isWin, lvl, logic) {
    let div = document.createElement('div');
    div.className = `log-item`;
    
    let status = isWin;
    if(pick === "SKIP") status = "SKIP";
    
    let resText = "";
    if (status === true) resText = "<span class='win-txt'>WIN</span>";
    else if (status === "SKIP") resText = "<span class='skip-txt'>SKIP</span>";
    else resText = "<span class='loss-txt'>LOSS</span>";
    
    div.innerHTML = `
        <span>${issue.slice(-4)}</span>
        <span style="color:#888">${logic}</span>
        <span>${resText}</span>
    `;
    document.getElementById('historyList').prepend(div);
}
</script>
</body>
</html>
